"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/test-sessions/route";
exports.ids = ["app/api/test-sessions/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftest-sessions%2Froute&page=%2Fapi%2Ftest-sessions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftest-sessions%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5CDocuments%5CGitHub%5Conlyfans_last_chance%5Conlyfans%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5CDocuments%5CGitHub%5Conlyfans_last_chance%5Conlyfans&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftest-sessions%2Froute&page=%2Fapi%2Ftest-sessions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftest-sessions%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5CDocuments%5CGitHub%5Conlyfans_last_chance%5Conlyfans%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5CDocuments%5CGitHub%5Conlyfans_last_chance%5Conlyfans&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Administrator_Documents_GitHub_onlyfans_last_chance_onlyfans_app_api_test_sessions_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/test-sessions/route.ts */ \"(rsc)/./app/api/test-sessions/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/test-sessions/route\",\n        pathname: \"/api/test-sessions\",\n        filename: \"route\",\n        bundlePath: \"app/api/test-sessions/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Administrator\\\\Documents\\\\GitHub\\\\onlyfans_last_chance\\\\onlyfans\\\\app\\\\api\\\\test-sessions\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Administrator_Documents_GitHub_onlyfans_last_chance_onlyfans_app_api_test_sessions_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/test-sessions/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0ZXN0LXNlc3Npb25zJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ0ZXN0LXNlc3Npb25zJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdGVzdC1zZXNzaW9ucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBZG1pbmlzdHJhdG9yJTVDRG9jdW1lbnRzJTVDR2l0SHViJTVDb25seWZhbnNfbGFzdF9jaGFuY2UlNUNvbmx5ZmFucyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDQWRtaW5pc3RyYXRvciU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q29ubHlmYW5zX2xhc3RfY2hhbmNlJTVDb25seWZhbnMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzhEO0FBQzNJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25seWZhbnMvPzJjODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcQWRtaW5pc3RyYXRvclxcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXG9ubHlmYW5zX2xhc3RfY2hhbmNlXFxcXG9ubHlmYW5zXFxcXGFwcFxcXFxhcGlcXFxcdGVzdC1zZXNzaW9uc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdGVzdC1zZXNzaW9ucy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Rlc3Qtc2Vzc2lvbnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Rlc3Qtc2Vzc2lvbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxBZG1pbmlzdHJhdG9yXFxcXERvY3VtZW50c1xcXFxHaXRIdWJcXFxcb25seWZhbnNfbGFzdF9jaGFuY2VcXFxcb25seWZhbnNcXFxcYXBwXFxcXGFwaVxcXFx0ZXN0LXNlc3Npb25zXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90ZXN0LXNlc3Npb25zL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftest-sessions%2Froute&page=%2Fapi%2Ftest-sessions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftest-sessions%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5CDocuments%5CGitHub%5Conlyfans_last_chance%5Conlyfans%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5CDocuments%5CGitHub%5Conlyfans_last_chance%5Conlyfans&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/test-sessions/route.ts":
/*!****************************************!*\
  !*** ./app/api/test-sessions/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _src_lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n\n\n// GET /api/test-sessions - получить все сессии или конкретную по id\nasync function GET(request) {\n    try {\n        const url = new URL(request.url);\n        const id = url.searchParams.get(\"id\");\n        const limit = url.searchParams.get(\"limit\") ? parseInt(url.searchParams.get(\"limit\")) : undefined;\n        // Если указан id, возвращаем конкретную сессию\n        if (id) {\n            const session = await (0,_src_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getTestSession)(id);\n            if (!session) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Сессия не найдена\"\n                }, {\n                    status: 404\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n        }\n        // Иначе возвращаем список всех сессий с ограничением, если оно указано\n        const sessions = await (0,_src_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getRecentTestSessions)(limit || 10);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(sessions);\n    } catch (error) {\n        console.error(\"Error fetching test sessions:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Ошибка при получении данных о тестовых сессиях\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/test-sessions - создать новую тестовую сессию\nasync function POST(request) {\n    try {\n        const data = await request.json();\n        const { employeeId } = data;\n        if (!employeeId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ID сотрудника не указан\"\n            }, {\n                status: 400\n            });\n        }\n        const session = await (0,_src_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.createTestSession)(employeeId);\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Не удалось создать тестовую сессию\"\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            session\n        });\n    } catch (error) {\n        console.error(\"Error creating test session:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Ошибка при создании тестовой сессии\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PATCH /api/test-sessions - обновить тестовую сессию (завершить или добавить сообщение)\nasync function PATCH(request) {\n    try {\n        const url = new URL(request.url);\n        const id = url.searchParams.get(\"id\");\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ID сессии не указан\"\n            }, {\n                status: 400\n            });\n        }\n        const data = await request.json();\n        const { action, chatId, message } = data;\n        // Проверяем действие\n        if (action === \"complete\") {\n            // Завершаем сессию\n            const result = await (0,_src_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.completeTestSession)(id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                ...result\n            });\n        } else if (action === \"addMessage\" && chatId !== undefined && message) {\n            // Добавляем сообщение\n            const result = await (0,_src_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.addMessageToTestSession)(id, chatId, message);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                ...result\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Недопустимое действие или отсутствуют необходимые параметры\"\n            }, {\n                status: 400\n            });\n        }\n    } catch (error) {\n        console.error(\"Error updating test session:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Ошибка при обновлении тестовой сессии\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU07WUFDWDtRQUNGLE9BQU8sSUFBSUgsV0FBVyxnQkFBZ0JDLFdBQVdiLGFBQWFjLFNBQVM7WUFDckUsc0JBQXNCO1lBQ3RCLE1BQU1DLFNBQVMsTUFBTXpCLDBFQUF1QkEsQ0FBQ0ssSUFBSWtCLFFBQVFDO1lBRXpELE9BQU83QixxREFBWUEsQ0FBQ2lCLElBQUksQ0FBQztnQkFDdkJRLFNBQVM7Z0JBQ1QsR0FBR0ssTUFBTTtZQUNYO1FBQ0YsT0FBTztZQUNMLE9BQU85QixxREFBWUEsQ0FBQ2lCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBOEQsR0FDdkU7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtJQUNGLEVBQUUsT0FBT0QsT0FBTztRQUNkRyxRQUFRSCxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPbEIscURBQVlBLENBQUNpQixJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0MsR0FDakQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vbmx5ZmFucy8uL2FwcC9hcGkvdGVzdC1zZXNzaW9ucy9yb3V0ZS50cz9iMDRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHtcclxuICBnZXRSZWNlbnRUZXN0U2Vzc2lvbnMsXHJcbiAgZ2V0VGVzdFNlc3Npb24sXHJcbiAgY3JlYXRlVGVzdFNlc3Npb24sXHJcbiAgY29tcGxldGVUZXN0U2Vzc2lvbixcclxuICBhZGRNZXNzYWdlVG9UZXN0U2Vzc2lvblxyXG59IGZyb20gJy4uLy4uLy4uL3NyYy9saWIvc3VwYWJhc2UnO1xyXG5cclxuLy8gR0VUIC9hcGkvdGVzdC1zZXNzaW9ucyAtINC/0L7Qu9GD0YfQuNGC0Ywg0LLRgdC1INGB0LXRgdGB0LjQuCDQuNC70Lgg0LrQvtC90LrRgNC10YLQvdGD0Y4g0L/QviBpZFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XHJcbiAgICBjb25zdCBpZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xyXG4gICAgY29uc3QgbGltaXQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSA/IHBhcnNlSW50KHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpISkgOiB1bmRlZmluZWQ7XHJcbiAgICBcclxuICAgIC8vINCV0YHQu9C4INGD0LrQsNC30LDQvSBpZCwg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LrQvtC90LrRgNC10YLQvdGD0Y4g0YHQtdGB0YHQuNGOXHJcbiAgICBpZiAoaWQpIHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFRlc3RTZXNzaW9uKGlkKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghc2Vzc2lvbikge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6ICfQodC10YHRgdC40Y8g0L3QtSDQvdCw0LnQtNC10L3QsCcgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihzZXNzaW9uKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g0JjQvdCw0YfQtSDQstC+0LfQstGA0LDRidCw0LXQvCDRgdC/0LjRgdC+0Log0LLRgdC10YUg0YHQtdGB0YHQuNC5INGBINC+0LPRgNCw0L3QuNGH0LXQvdC40LXQvCwg0LXRgdC70Lgg0L7QvdC+INGD0LrQsNC30LDQvdC+XHJcbiAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IGdldFJlY2VudFRlc3RTZXNzaW9ucyhsaW1pdCB8fCAxMCk7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihzZXNzaW9ucyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHRlc3Qgc2Vzc2lvbnM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAn0J7RiNC40LHQutCwINC/0YDQuCDQv9C+0LvRg9GH0LXQvdC40Lgg0LTQsNC90L3Ri9GFINC+INGC0LXRgdGC0L7QstGL0YUg0YHQtdGB0YHQuNGP0YUnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFBPU1QgL2FwaS90ZXN0LXNlc3Npb25zIC0g0YHQvtC30LTQsNGC0Ywg0L3QvtCy0YPRjiDRgtC10YHRgtC+0LLRg9GOINGB0LXRgdGB0LjRjlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIGNvbnN0IHsgZW1wbG95ZWVJZCB9ID0gZGF0YTtcclxuICAgIFxyXG4gICAgaWYgKCFlbXBsb3llZUlkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnSUQg0YHQvtGC0YDRg9C00L3QuNC60LAg0L3QtSDRg9C60LDQt9Cw0L0nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjcmVhdGVUZXN0U2Vzc2lvbihlbXBsb3llZUlkKTtcclxuICAgIFxyXG4gICAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAn0J3QtSDRg9C00LDQu9C+0YHRjCDRgdC+0LfQtNCw0YLRjCDRgtC10YHRgtC+0LLRg9GOINGB0LXRgdGB0LjRjicgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgc2Vzc2lvblxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHRlc3Qgc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICfQntGI0LjQsdC60LAg0L/RgNC4INGB0L7Qt9C00LDQvdC40Lgg0YLQtdGB0YLQvtCy0L7QuSDRgdC10YHRgdC40LgnIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFBBVENIIC9hcGkvdGVzdC1zZXNzaW9ucyAtINC+0LHQvdC+0LLQuNGC0Ywg0YLQtdGB0YLQvtCy0YPRjiDRgdC10YHRgdC40Y4gKNC30LDQstC10YDRiNC40YLRjCDQuNC70Lgg0LTQvtCx0LDQstC40YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgaWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnaWQnKTtcclxuICAgIFxyXG4gICAgaWYgKCFpZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0lEINGB0LXRgdGB0LjQuCDQvdC1INGD0LrQsNC30LDQvScgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgY29uc3QgeyBhY3Rpb24sIGNoYXRJZCwgbWVzc2FnZSB9ID0gZGF0YTtcclxuICAgIFxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC00LXQudGB0YLQstC40LVcclxuICAgIGlmIChhY3Rpb24gPT09ICdjb21wbGV0ZScpIHtcclxuICAgICAgLy8g0JfQsNCy0LXRgNGI0LDQtdC8INGB0LXRgdGB0LjRjlxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21wbGV0ZVRlc3RTZXNzaW9uKGlkKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAuLi5yZXN1bHRcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2FkZE1lc3NhZ2UnICYmIGNoYXRJZCAhPT0gdW5kZWZpbmVkICYmIG1lc3NhZ2UpIHtcclxuICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGRNZXNzYWdlVG9UZXN0U2Vzc2lvbihpZCwgY2hhdElkLCBtZXNzYWdlKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAuLi5yZXN1bHRcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ9Cd0LXQtNC+0L/Rg9GB0YLQuNC80L7QtSDQtNC10LnRgdGC0LLQuNC1INC40LvQuCDQvtGC0YHRg9GC0YHRgtCy0YPRjtGCINC90LXQvtCx0YXQvtC00LjQvNGL0LUg0L/QsNGA0LDQvNC10YLRgNGLJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB0ZXN0IHNlc3Npb246JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAn0J7RiNC40LHQutCwINC/0YDQuCDQvtCx0L3QvtCy0LvQtdC90LjQuCDRgtC10YHRgtC+0LLQvtC5INGB0LXRgdGB0LjQuCcgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0UmVjZW50VGVzdFNlc3Npb25zIiwiZ2V0VGVzdFNlc3Npb24iLCJjcmVhdGVUZXN0U2Vzc2lvbiIsImNvbXBsZXRlVGVzdFNlc3Npb24iLCJhZGRNZXNzYWdlVG9UZXN0U2Vzc2lvbiIsIkdFVCIsInJlcXVlc3QiLCJ1cmwiLCJVUkwiLCJpZCIsInNlYXJjaFBhcmFtcyIsImdldCIsImxpbWl0IiwicGFyc2VJbnQiLCJ1bmRlZmluZWQiLCJzZXNzaW9uIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic2Vzc2lvbnMiLCJjb25zb2xlIiwiUE9TVCIsImRhdGEiLCJlbXBsb3llZUlkIiwic3VjY2VzcyIsIlBBVENIIiwiYWN0aW9uIiwiY2hhdElkIiwibWVzc2FnZSIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/test-sessions/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addMessageToTestSession: () => (/* binding */ addMessageToTestSession),\n/* harmony export */   completeAllEmployeeTestSessions: () => (/* binding */ completeAllEmployeeTestSessions),\n/* harmony export */   completeTestSession: () => (/* binding */ completeTestSession),\n/* harmony export */   createCandidateToken: () => (/* binding */ createCandidateToken),\n/* harmony export */   createEmployee: () => (/* binding */ createEmployee),\n/* harmony export */   createTestSession: () => (/* binding */ createTestSession),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteEmployee: () => (/* binding */ deleteEmployee),\n/* harmony export */   generateAnalysisPrompt: () => (/* binding */ generateAnalysisPrompt),\n/* harmony export */   getCandidateForm: () => (/* binding */ getCandidateForm),\n/* harmony export */   getCandidateFormByEmployeeId: () => (/* binding */ getCandidateFormByEmployeeId),\n/* harmony export */   getChatHistory: () => (/* binding */ getChatHistory),\n/* harmony export */   getEmployee: () => (/* binding */ getEmployee),\n/* harmony export */   getEmployeeTestSessions: () => (/* binding */ getEmployeeTestSessions),\n/* harmony export */   getEmployees: () => (/* binding */ getEmployees),\n/* harmony export */   getRecentTestSessions: () => (/* binding */ getRecentTestSessions),\n/* harmony export */   getTestResultForSession: () => (/* binding */ getTestResultForSession),\n/* harmony export */   getTestResultsForEmployee: () => (/* binding */ getTestResultsForEmployee),\n/* harmony export */   getTestSession: () => (/* binding */ getTestSession),\n/* harmony export */   getTestSessionChats: () => (/* binding */ getTestSessionChats),\n/* harmony export */   saveCandidateForm: () => (/* binding */ saveCandidateForm),\n/* harmony export */   saveTestResult: () => (/* binding */ saveTestResult),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   updateChatStatus: () => (/* binding */ updateChatStatus),\n/* harmony export */   updateEmployee: () => (/* binding */ updateEmployee),\n/* harmony export */   updateTestSession: () => (/* binding */ updateTestSession),\n/* harmony export */   validateCandidateToken: () => (/* binding */ validateCandidateToken)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Обновляем доступ к переменным окружения на формат Next.js\nconst supabaseUrl = \"https://amsxabtrixxfzrhinese.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFtc3hhYnRyaXh4ZnpyaGluZXNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDExNTg4NDMsImV4cCI6MjA1NjczNDg0M30.u6P78OG9xPdMsw3I-9A19VMdWviNZerUIPZs1xMGEeQ\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\nconsole.log(\"Initializing Supabase client with URL:\", supabaseUrl);\n// Создаем клиента с расширенными опциями\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: true,\n        persistSession: true\n    },\n    global: {\n        fetch: fetch.bind(globalThis)\n    }\n});\n// Проверяем соединение при инициализации\n(async ()=>{\n    if (false) {}\n})();\n// Employee functions\nasync function createEmployee(employeeData) {\n    try {\n        const { data, error } = await supabase.from(\"employees\").insert([\n            {\n                first_name: employeeData.first_name,\n                department: employeeData.department || \"Candidates\",\n                level: employeeData.level || \"Candidate\",\n                success: employeeData.success !== undefined ? employeeData.success : 0,\n                improvement: employeeData.improvement || \"0%\",\n                trend: employeeData.trend || \"up\",\n                status: employeeData.status || \"Новый сотрудник\"\n            }\n        ]).select();\n        if (error) {\n            console.error(\"Error creating employee:\", error);\n            throw new Error(\"Failed to create employee\");\n        }\n        if (!data || data.length === 0) {\n            throw new Error(\"No data returned from the database\");\n        }\n        return data[0];\n    } catch (error) {\n        console.error(\"Error in createEmployee:\", error);\n        throw error;\n    }\n}\nasync function getEmployees() {\n    const { data, error } = await supabase.from(\"employees\").select(\"*\").order(\"created_at\", {\n        ascending: false\n    });\n    if (error) {\n        console.error(\"Error fetching employees:\", error);\n        throw new Error(`Error fetching employees: ${error.message}`);\n    }\n    return data;\n}\nasync function getEmployee(id) {\n    const { data, error } = await supabase.from(\"employees\").select(\"*\").eq(\"id\", id).single();\n    if (error) {\n        console.error(\"Error fetching employee:\", error);\n        throw new Error(`Error fetching employee: ${error.message}`);\n    }\n    if (!data) {\n        throw new Error(\"Employee not found\");\n    }\n    return data;\n}\nasync function updateEmployee(id, employeeData) {\n    try {\n        const { data, error } = await supabase.from(\"employees\").update(employeeData).eq(\"id\", id).select();\n        if (error) {\n            console.error(\"Error updating employee:\", error);\n            throw new Error(\"Failed to update employee\");\n        }\n        if (!data || data.length === 0) {\n            throw new Error(\"No data returned from the database\");\n        }\n        return data[0];\n    } catch (error) {\n        console.error(\"Error in updateEmployee:\", error);\n        throw error;\n    }\n}\nasync function deleteEmployee(id) {\n    const { error } = await supabase.from(\"employees\").delete().eq(\"id\", id);\n    if (error) {\n        console.error(\"Error deleting employee:\", error);\n        throw new Error(`Error deleting employee: ${error.message}`);\n    }\n}\n// Test session functions\nasync function createTestSession(employeeId) {\n    try {\n        console.log(\"\\uD83D\\uDD04 Creating test session:\", {\n            employeeId\n        });\n        // Проверяем, существуют ли уже активные сессии для этого сотрудника\n        const { data: existingSessions, error: checkError } = await supabase.from(\"test_sessions\").select(\"*\").eq(\"employee_id\", employeeId).eq(\"completed\", false).order(\"created_at\", {\n            ascending: false\n        }).limit(1);\n        if (checkError) {\n            console.error(\"❌ Error checking existing sessions:\", checkError);\n        } else if (existingSessions && existingSessions.length > 0) {\n            console.log(\"\\uD83D\\uDD0D Found existing active session for employee:\", existingSessions[0]);\n            // Проверяем, существуют ли чаты для этой сессии\n            const { data: existingChats, error: chatError } = await supabase.from(\"chats\").select(\"*\").eq(\"test_session_id\", existingSessions[0].id).order(\"chat_number\");\n            if (!chatError && existingChats && existingChats.length === 4) {\n                console.log(\"✅ Using existing session with all 4 chats:\", existingChats.map((c)=>({\n                        id: c.id,\n                        chatNumber: c.chat_number\n                    })));\n                return {\n                    ...existingSessions[0],\n                    chats: existingChats\n                };\n            } else if (!chatError && existingChats && existingChats.length > 0) {\n                console.warn(\"⚠️ Found session with incomplete chats:\", existingChats.length);\n                console.log(\"➕ Creating missing chats...\");\n                // Находим, каких чатов не хватает\n                const existingChatNumbers = existingChats.map((c)=>c.chat_number);\n                const missingChatNumbers = [\n                    1,\n                    2,\n                    3,\n                    4\n                ].filter((num)=>!existingChatNumbers.includes(num));\n                if (missingChatNumbers.length > 0) {\n                    console.log(\"\\uD83D\\uDD0D Missing chat numbers:\", missingChatNumbers);\n                    // Создаем недостающие чаты\n                    const additionalChatResults = await Promise.all(missingChatNumbers.map((chatNumber)=>supabase.from(\"chats\").insert([\n                            {\n                                test_session_id: existingSessions[0].id,\n                                chat_number: chatNumber,\n                                messages: []\n                            }\n                        ]).select().single()));\n                    const allChats = [\n                        ...existingChats\n                    ];\n                    let additionalChatsCreated = true;\n                    // Проверяем, что все дополнительные чаты созданы успешно\n                    for(let i = 0; i < additionalChatResults.length; i++){\n                        const { data, error } = additionalChatResults[i];\n                        if (error) {\n                            console.error(`❌ Error creating missing chat ${missingChatNumbers[i]}:`, error);\n                            additionalChatsCreated = false;\n                        } else {\n                            console.log(`✅ Missing chat ${missingChatNumbers[i]} created successfully`);\n                            allChats.push(data);\n                        }\n                    }\n                    if (additionalChatsCreated) {\n                        console.log(\"✅ All missing chats created, using existing session with complete chats\");\n                        return {\n                            ...existingSessions[0],\n                            chats: allChats\n                        };\n                    }\n                }\n            }\n            console.log(\"⚠️ Existing session has incomplete chats, proceeding to create new session\");\n        }\n        // Создаем тестовую сессию\n        const { data: session, error: sessionError } = await supabase.from(\"test_sessions\").insert([\n            {\n                employee_id: employeeId,\n                start_time: new Date().toISOString(),\n                completed: false\n            }\n        ]).select().single();\n        if (sessionError || !session) {\n            console.error(\"❌ Failed to create test session:\", sessionError);\n            throw sessionError || new Error(\"No data returned from test session creation\");\n        }\n        console.log(\"✅ Test session created:\", {\n            id: session.id,\n            employeeId: session.employee_id\n        });\n        // Создаем 4 пустых чата для сессии\n        console.log(\"\\uD83D\\uDD04 Creating 4 chats for session:\", session.id);\n        const chatResults = await Promise.all([\n            1,\n            2,\n            3,\n            4\n        ].map((chatNumber)=>supabase.from(\"chats\").insert([\n                {\n                    test_session_id: session.id,\n                    chat_number: chatNumber,\n                    messages: []\n                }\n            ]).select().single()));\n        // Проверяем, что все чаты созданы успешно\n        const chatErrors = [];\n        const createdChats = [];\n        for(let i = 0; i < chatResults.length; i++){\n            const { data, error } = chatResults[i];\n            if (error) {\n                console.error(`❌ Error creating chat ${i + 1}:`, error);\n                chatErrors.push({\n                    chatNumber: i + 1,\n                    error: error.message\n                });\n            } else {\n                console.log(`✅ Chat ${i + 1} created successfully:`, {\n                    id: data.id,\n                    test_session_id: data.test_session_id,\n                    chat_number: data.chat_number\n                });\n                createdChats.push(data);\n            }\n        }\n        if (chatErrors.length > 0) {\n            console.error(\"❌ Failed to create all chats:\", chatErrors);\n            // Если хоть какие-то чаты созданы, продолжаем с ними\n            if (createdChats.length > 0) {\n                console.warn(`⚠️ Continuing with ${createdChats.length} created chats instead of 4`);\n            } else {\n                throw new Error(\"Failed to create any chats for test session\");\n            }\n        }\n        // Повторно получаем созданные чаты для большей надежности\n        const { data: chats, error: chatsError } = await supabase.from(\"chats\").select(\"*\").eq(\"test_session_id\", session.id).order(\"chat_number\");\n        if (chatsError) {\n            console.error(\"❌ Error fetching created chats:\", chatsError);\n            // Используем те чаты, которые мы уже создали\n            if (createdChats.length > 0) {\n                console.warn(\"⚠️ Using directly created chats instead of fetched ones\");\n                return {\n                    ...session,\n                    chats: createdChats\n                };\n            }\n            throw new Error(\"Failed to fetch created chats\");\n        }\n        // Проверяем, что у нас есть все 4 чата\n        if (!chats || chats.length < 4) {\n            console.warn(`⚠️ Only ${chats?.length || 0} chats found instead of 4, attempting repair`);\n            // Находим, каких чатов не хватает\n            const existingChatNumbers = chats?.map((c)=>c.chat_number) || [];\n            const missingChatNumbers = [\n                1,\n                2,\n                3,\n                4\n            ].filter((num)=>!existingChatNumbers.includes(num));\n            // Создаем недостающие чаты\n            if (missingChatNumbers.length > 0) {\n                console.log(\"➕ Creating missing chat numbers:\", missingChatNumbers);\n                const repairResults = await Promise.all(missingChatNumbers.map((chatNumber)=>supabase.from(\"chats\").insert([\n                        {\n                            test_session_id: session.id,\n                            chat_number: chatNumber,\n                            messages: []\n                        }\n                    ]).select().single()));\n                // Добавляем восстановленные чаты к существующим\n                const repairedChats = [\n                    ...chats || []\n                ];\n                for (const { data, error } of repairResults){\n                    if (!error && data) {\n                        repairedChats.push(data);\n                        console.log(`✅ Successfully repaired missing chat ${data.chat_number}`);\n                    }\n                }\n                // Используем восстановленные чаты\n                if (repairedChats.length > (chats?.length || 0)) {\n                    console.log(\"✅ Chat repair successful, now have\", repairedChats.length, \"chats\");\n                    return {\n                        ...session,\n                        chats: repairedChats\n                    };\n                }\n            }\n        }\n        console.log(\"✅ All chats created and fetched successfully:\", {\n            sessionId: session.id,\n            employeeId: session.employee_id,\n            chatCount: chats ? chats.length : 0,\n            chatNumbers: chats ? chats.map((c)=>c.chat_number) : []\n        });\n        return {\n            ...session,\n            chats: chats || []\n        };\n    } catch (error) {\n        console.error(\"❌ Error in createTestSession:\", error);\n        throw error;\n    }\n}\nasync function updateTestSession(sessionId, updates) {\n    try {\n        console.log(\"Updating test session:\", {\n            sessionId,\n            updates\n        });\n        const { data, error } = await supabase.from(\"test_sessions\").update({\n            ...updates,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", sessionId).select().single();\n        if (error) {\n            console.error(\"Error updating test session:\", error);\n            throw error;\n        }\n        if (!data) {\n            throw new Error(\"No data returned from test session update\");\n        }\n        console.log(\"Test session updated successfully:\", data);\n        return data;\n    } catch (error) {\n        console.error(\"Error in updateTestSession:\", error);\n        throw error;\n    }\n}\nasync function completeTestSession(sessionId) {\n    try {\n        console.log(\"\\uD83D\\uDD04 Completing test session:\", {\n            sessionId\n        });\n        // Проверим существование сессии перед обновлением\n        const { data: existingSession, error: checkError } = await supabase.from(\"test_sessions\").select(\"*\").eq(\"id\", sessionId).single();\n        if (checkError) {\n            console.error(\"❌ Error checking session existence:\", checkError);\n            throw new Error(`Failed to find session: ${checkError.message}`);\n        }\n        if (!existingSession) {\n            console.error(\"❌ Session not found:\", sessionId);\n            throw new Error(\"Session not found\");\n        }\n        console.log(\"✓ Found session to complete:\", {\n            id: existingSession.id,\n            completed: existingSession.completed,\n            employee_id: existingSession.employee_id\n        });\n        // Если сессия уже завершена, просто возвращаем её\n        if (existingSession.completed) {\n            console.log(\"ℹ️ Session already completed:\", existingSession);\n            return existingSession;\n        }\n        const { data, error } = await supabase.from(\"test_sessions\").update({\n            end_time: new Date().toISOString(),\n            completed: true,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", sessionId).select().single();\n        if (error) {\n            console.error(\"❌ Error completing test session:\", error);\n            throw error;\n        }\n        if (!data) {\n            console.error(\"❌ No data returned from test session completion\");\n            throw new Error(\"No data returned from test session completion\");\n        }\n        console.log(\"✅ Test session completed successfully:\", data);\n        // Обновление кэша в localStorage для немедленного отражения изменений\n        try {\n            const cacheKey = `test_session_${sessionId}`;\n            localStorage.setItem(cacheKey, JSON.stringify({\n                ...data,\n                cached_at: new Date().toISOString()\n            }));\n            console.log(\"✅ Session cache updated in localStorage\");\n        } catch (cacheError) {\n            console.warn(\"⚠️ Failed to update local cache:\", cacheError);\n        // Игнорируем ошибку кэширования, это некритично\n        }\n        return data;\n    } catch (error) {\n        console.error(\"❌ Error in completeTestSession:\", error);\n        throw error;\n    }\n}\nasync function getRecentTestSessions(limit = 20) {\n    try {\n        console.log(\"\\uD83D\\uDD0D Fetching recent test sessions, limit:\", limit);\n        // Сначала проверим кэш в localStorage\n        try {\n            const cacheKey = \"recent_test_sessions\";\n            const cachedData = localStorage.getItem(cacheKey);\n            if (cachedData) {\n                const { sessions, timestamp } = JSON.parse(cachedData);\n                const cacheAge = Date.now() - new Date(timestamp).getTime();\n                // Если кэш не старше 5 секунд (5000 мс), используем его\n                if (cacheAge < 5000 && Array.isArray(sessions) && sessions.length > 0) {\n                    console.log(\"\\uD83D\\uDCCB Using cached test sessions, age:\", Math.round(cacheAge / 1000), \"seconds\");\n                    return sessions;\n                }\n            }\n        } catch (cacheError) {\n            console.warn(\"⚠️ Cache error:\", cacheError);\n        // Продолжаем без использования кэша\n        }\n        const { data, error } = await supabase.from(\"test_sessions\").select(`\r\n        *,\r\n        employee:employees (\r\n          first_name\r\n        ),\r\n        chats (\r\n          id,\r\n          chat_number,\r\n          messages\r\n        )\r\n      `).order(\"created_at\", {\n            ascending: false\n        }).limit(limit);\n        if (error) {\n            console.error(\"❌ Error fetching recent test sessions:\", error);\n            throw error;\n        }\n        // Проверяем наличие данных\n        if (!data || data.length === 0) {\n            console.warn(\"⚠️ No test sessions found\");\n            return [];\n        }\n        console.log(\"\\uD83D\\uDCCA Raw test sessions:\", data.map((s)=>({\n                id: s.id,\n                employee_id: s.employee_id,\n                completed: s.completed,\n                end_time: s.end_time\n            })));\n        // Проверяем каждую сессию на корректность данных\n        const validSessions = data.filter((session)=>{\n            if (!session.id || !session.employee_id) {\n                console.warn(\"⚠️ Invalid session data:\", session);\n                return false;\n            }\n            return true;\n        });\n        // Группируем сессии по employee_id - для каждого сотрудника берем самую последнюю сессию\n        const latestSessionByEmployee = {};\n        validSessions.forEach((session)=>{\n            const employeeId = session.employee_id;\n            // Проверяем, правильно ли установлен флаг completed\n            // Если есть end_time, но completed = false, корректируем это\n            if (session.end_time && !session.completed) {\n                console.warn(\"⚠️ Session has end_time but completed=false, fixing:\", session.id);\n                session.completed = true;\n            }\n            // Если у нас уже есть сессия для этого сотрудника, берем более новую\n            if (latestSessionByEmployee[employeeId]) {\n                const existingDate = new Date(latestSessionByEmployee[employeeId].created_at).getTime();\n                const currentDate = new Date(session.created_at).getTime();\n                if (currentDate > existingDate) {\n                    latestSessionByEmployee[employeeId] = session;\n                }\n            } else {\n                latestSessionByEmployee[employeeId] = session;\n            }\n        });\n        // Преобразуем объект обратно в массив и сортируем по времени создания (от новых к старым)\n        const uniqueSessions = Object.values(latestSessionByEmployee).sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n        console.log(\"\\uD83D\\uDCCB Filtered sessions:\", uniqueSessions.map((s)=>({\n                id: s.id,\n                employee_id: s.employee_id,\n                completed: s.completed,\n                messages_count: s.chats?.reduce((total, chat)=>total + (chat.messages?.length || 0), 0) || 0\n            })));\n        // Кэшируем результат в localStorage\n        try {\n            const cacheKey = \"recent_test_sessions\";\n            localStorage.setItem(cacheKey, JSON.stringify({\n                sessions: uniqueSessions,\n                timestamp: new Date().toISOString()\n            }));\n            console.log(\"✅ Sessions cached in localStorage\");\n        } catch (cacheError) {\n            console.warn(\"⚠️ Failed to cache sessions:\", cacheError);\n        // Игнорируем ошибку кэширования\n        }\n        return uniqueSessions;\n    } catch (error) {\n        console.error(\"❌ Error in getRecentTestSessions:\", error);\n        throw error;\n    }\n}\nasync function getEmployeeTestSessions(employeeId) {\n    try {\n        const { data, error } = await supabase.from(\"test_sessions\").select(`\r\n        *,\r\n        employee:employees (\r\n          first_name\r\n        ),\r\n        chats (\r\n          id,\r\n          chat_number,\r\n          messages\r\n        )\r\n      `).eq(\"employee_id\", employeeId).order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Error fetching employee test sessions:\", error);\n            throw error;\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Error in getEmployeeTestSessions:\", error);\n        throw error;\n    }\n}\nasync function addMessageToTestSession(sessionId, chatNumber, message) {\n    try {\n        console.log(\"Adding message to session:\", {\n            sessionId,\n            chatNumber,\n            message\n        });\n        // Проверка существования сессии перед добавлением сообщения\n        try {\n            const session = await getTestSession(sessionId);\n            console.log(\"Found session for message:\", {\n                sessionId,\n                employeeId: session.employee_id,\n                completed: session.completed\n            });\n        } catch (sessionError) {\n            console.error(\"Session validation error:\", sessionError);\n        // Продолжаем выполнение, так как ошибка может быть только в логировании\n        }\n        // Получаем чат напрямую через single()\n        const { data: chat, error: fetchError } = await supabase.from(\"chats\").select(\"*\").eq(\"test_session_id\", sessionId).eq(\"chat_number\", chatNumber).single();\n        if (fetchError) {\n            console.error(\"Error fetching chat:\", fetchError);\n            throw new Error(`Failed to fetch chat: ${fetchError.message}`);\n        }\n        if (!chat) {\n            console.error(\"Chat not found for session:\", sessionId, \"and number:\", chatNumber);\n            // Дополнительная проверка существования чатов для сессии\n            const { data: existingChats, error: chatsError } = await supabase.from(\"chats\").select(\"id, chat_number\").eq(\"test_session_id\", sessionId);\n            if (chatsError) {\n                console.error(\"Error checking existing chats:\", chatsError);\n            } else {\n                console.log(\"Existing chats for session:\", existingChats);\n            }\n            throw new Error(\"Chat not found\");\n        }\n        console.log(\"Found chat:\", {\n            chatId: chat.id,\n            existingMessages: chat.messages?.length || 0\n        });\n        // Преобразуем существующие сообщения из JSONB\n        const existingMessages = chat.messages || [];\n        const updatedMessages = [\n            ...existingMessages,\n            message\n        ];\n        // Обновляем сообщения в чате\n        const { data: updatedChat, error: updateError } = await supabase.from(\"chats\").update({\n            messages: updatedMessages,\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", chat.id).select().single();\n        if (updateError) {\n            console.error(\"Error updating chat:\", updateError);\n            throw updateError;\n        }\n        if (!updatedChat) {\n            throw new Error(\"Failed to update chat\");\n        }\n        console.log(\"Message added successfully:\", {\n            chatId: updatedChat.id,\n            messageCount: updatedChat.messages.length,\n            latestMessage: updatedChat.messages[updatedChat.messages.length - 1]\n        });\n        return updatedChat;\n    } catch (error) {\n        console.error(\"Error in addMessageToTestSession:\", error);\n        throw error;\n    }\n}\n// Новая функция для получения всех чатов тестовой сессии\nasync function getTestSessionChats(sessionId) {\n    try {\n        const { data, error } = await supabase.from(\"chats\").select(\"*\").eq(\"test_session_id\", sessionId).order(\"chat_number\");\n        if (error) {\n            throw error;\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Error in getTestSessionChats:\", error);\n        throw error;\n    }\n}\nasync function getChatHistory(testSessionId) {\n    try {\n        console.log(\"Fetching chat history for session:\", testSessionId);\n        const { data, error } = await supabase.from(\"chats\").select(\"*\").eq(\"test_session_id\", testSessionId).order(\"chat_number\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"Error fetching chat history:\", error);\n            throw error;\n        }\n        if (!data) {\n            console.log(\"No chat history found\");\n            return [];\n        }\n        console.log(\"Chat history fetched successfully:\", data);\n        return data;\n    } catch (error) {\n        console.error(\"Error in getChatHistory:\", error);\n        throw error;\n    }\n}\nasync function getTestSession(sessionId) {\n    try {\n        console.log(\"Fetching test session:\", {\n            sessionId\n        });\n        const { data, error } = await supabase.from(\"test_sessions\").select(\"*, employee:employee_id(*)\").eq(\"id\", sessionId).single();\n        if (error) {\n            console.error(\"Error fetching test session:\", error);\n            throw new Error(`Failed to fetch test session: ${error.message}`);\n        }\n        if (!data) {\n            console.error(\"No test session found with ID:\", sessionId);\n            throw new Error(\"Test session not found\");\n        }\n        console.log(\"Test session fetched successfully:\", data);\n        return data;\n    } catch (error) {\n        console.error(\"Error in getTestSession:\", error);\n        throw error;\n    }\n}\n/**\r\n * Completes all active test sessions for an employee\r\n */ async function completeAllEmployeeTestSessions(employeeId) {\n    try {\n        console.log(\"Completing all active test sessions for employee:\", employeeId);\n        // Получаем все активные сессии для сотрудника\n        const { data: activeSessions, error: fetchError } = await supabase.from(\"test_sessions\").select(\"id\").eq(\"employee_id\", employeeId).eq(\"completed\", false);\n        if (fetchError) {\n            console.error(\"Error fetching active sessions:\", fetchError);\n            throw fetchError;\n        }\n        if (!activeSessions || activeSessions.length === 0) {\n            console.log(\"No active sessions found for employee:\", employeeId);\n            return;\n        }\n        console.log(`Found ${activeSessions.length} active sessions to complete`);\n        // Завершаем каждую сессию\n        const currentTime = new Date().toISOString();\n        const { error: updateError } = await supabase.from(\"test_sessions\").update({\n            end_time: currentTime,\n            completed: true,\n            updated_at: currentTime\n        }).eq(\"employee_id\", employeeId).eq(\"completed\", false);\n        if (updateError) {\n            console.error(\"Error completing sessions:\", updateError);\n            throw updateError;\n        }\n        console.log(`Successfully completed ${activeSessions.length} sessions for employee:`, employeeId);\n    } catch (error) {\n        console.error(\"Error in completeAllEmployeeTestSessions:\", error);\n        throw error;\n    }\n}\n/**\r\n * Сохраняет результаты тестирования в базу данных\r\n */ async function saveTestResult(testResult) {\n    try {\n        console.log(\"Checking for existing test result:\", testResult.test_session_id);\n        // Проверяем, существуют ли уже результаты для этой сессии\n        const { data: existingResults, error: checkError } = await supabase.from(\"test_results\").select(\"id\").eq(\"test_session_id\", testResult.test_session_id).limit(1);\n        if (checkError) {\n            console.error(\"Error checking existing results:\", checkError);\n        // Продолжаем выполнение, даже если произошла ошибка при проверке\n        } else if (existingResults && existingResults.length > 0) {\n            console.log(\"Found existing result, updating instead of creating new:\", existingResults[0].id);\n            // Обновляем существующую запись\n            const { data: updatedData, error: updateError } = await supabase.from(\"test_results\").update({\n                ...testResult,\n                updated_at: new Date().toISOString()\n            }).eq(\"id\", existingResults[0].id).select().single();\n            if (updateError) {\n                console.error(\"Error updating test result:\", updateError);\n                throw updateError;\n            }\n            console.log(\"Test result updated successfully:\", updatedData);\n            return updatedData;\n        }\n        // Если результат не найден, создаем новый\n        const { data, error } = await supabase.from(\"test_results\").insert([\n            testResult\n        ]).select().single();\n        if (error) {\n            console.error(\"Error saving test result:\", error);\n            throw error;\n        }\n        console.log(\"New test result saved successfully:\", data);\n        return data;\n    } catch (error) {\n        console.error(\"Error in saveTestResult:\", error);\n        throw error;\n    }\n}\n/**\r\n * Получает результаты тестирования для сессии\r\n */ async function getTestResultForSession(sessionId) {\n    try {\n        console.log(\"Fetching test result for session:\", sessionId);\n        const { data, error } = await supabase.from(\"test_results\").select(\"*\").eq(\"test_session_id\", sessionId).single();\n        if (error) {\n            if (error.code === \"PGRST116\") {\n                // Результат не найден\n                console.log(\"No test result found for session:\", sessionId);\n                return null;\n            }\n            console.error(\"Error fetching test result:\", error);\n            throw error;\n        }\n        console.log(\"Test result fetched successfully:\", data);\n        return data;\n    } catch (error) {\n        console.error(\"Error in getTestResultForSession:\", error);\n        throw error;\n    }\n}\n/**\r\n * Получает все результаты тестирования для сотрудника\r\n */ async function getTestResultsForEmployee(employeeId) {\n    try {\n        console.log(\"Fetching test results for employee:\", employeeId);\n        const { data, error } = await supabase.from(\"test_results\").select(\"*\").eq(\"employee_id\", employeeId).order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Error fetching test results:\", error);\n            throw error;\n        }\n        console.log(`Fetched ${data?.length || 0} test results for employee:`, employeeId);\n        return data || [];\n    } catch (error) {\n        console.error(\"Error in getTestResultsForEmployee:\", error);\n        throw error;\n    }\n}\n/**\r\n * Собирает все сообщения из чатов сессии в единый промпт\r\n */ async function generateAnalysisPrompt(sessionId) {\n    try {\n        console.log(\"Generating analysis prompt for session:\", sessionId);\n        // Получаем все чаты для сессии\n        const chats = await getTestSessionChats(sessionId);\n        // Получаем информацию о сессии\n        const session = await getTestSession(sessionId);\n        if (!chats || chats.length === 0) {\n            throw new Error(\"No chats found for session\");\n        }\n        // Формируем заголовок промпта\n        const promptHeader = `Ты — Grok 3, созданный xAI. Я предоставлю тебе текстовый диалог между тестируемой моделью (соискателем на роль администратора моей страницы OnlyFans) и AI-клиентом OnlyFans. Твоя задача — проанализировать диалог и оценить модель по следующим 6 критериям:\r\n\r\nВовлеченность (Engagement): Насколько активно модель поддерживает интерес клиента, отвечает ли вовремя и удерживает ли внимание.\r\nОбаяние и тон (Charm and Tone): Насколько модель дружелюбна, привлекательна и использует ли подходящий тон общения.\r\nКреативность (Creativity): Насколько модель предлагает оригинальные идеи, разнообразит общение и избегает шаблонности.\r\nАдаптивность (Adaptability): Насколько модель гибко подстраивается под настроение и запросы клиента.\r\nУмение продавать себя (Self-Promotion): Насколько эффективно модель подчеркивает свои сильные стороны и вызывает желание продолжить общение.\r\nЦеновая политика (Pricing Policy): Насколько эффективно модель управляет вопросами цены, обосновывает ценность своих услуг и работает с возражениями по цене.\r\n\r\nДля каждого критерия:\r\nВыставь оценку от 0 до 5 (где 0 — минимально, 5 — идеально).\r\nДай подробный вердикт (комментарий), объясняющий оценку, включая сильные стороны и области для улучшения.\r\n\r\nДля критерия \"Ценовая политика\" дополнительно:\r\nПредоставь список сильных сторон (strengths) и областей, требующих улучшения (improvements).\r\n\r\nДополнительно проанализируй эффективность продаж по трем этапам:\r\n1. Знакомство (Introduction): Насколько эффективно модель устанавливает контакт и создает первое впечатление.\r\n2. Прогрев (Warmup): Насколько эффективно модель подогревает интерес и создает предпосылки для продажи.\r\n3. Продажа/Закрытие (Closing): Насколько эффективно модель закрывает сделку и преодолевает возражения.\r\n\r\nДля каждого этапа:\r\nВыставь оценку от 0 до 5 (где 0 — минимально, 5 — идеально).\r\nПредоставь список сильных сторон (strengths) и слабых сторон (weaknesses).\r\n\r\nНжуно сделать результаты более строгими вот наводящие правила чтобы понижать балл\r\n\r\n-тест идёт 20 минут\r\n-нужно при оценке учитывать и обьем сообщений чтоб с каждым собеседником было минимум по 6 сообщений\r\n-каждый диалог должен примерно содержать 3 стадии, иначе оценка низкая:\r\n1)Стадия знакомства знакомиться: 5 -10 сообщений они должны быть в большинстве своем последовательны и не пошлые\r\n2)Cтадия прогрева: по диалогу понятно что модель менее заинтересована чем клиент,модель должна не задавать много вопросов, показывать тизовый контент и намеки через подтекст ненавязчиво\r\n3)Стадия продаж: нужен баланс между пошлым повествованием и перегрузом контентом без водводящих сообщений, сообщения примерно строятся как два наводящих сообщения по покупке контента намекающих на изображения контента чем больше продаж тем лучше\r\n-также нужно учитывать чтоб модель не упрашивала приобрести контент, не выглядела как шлюха, работала на глубину чека и эмоциональную привязанность, высокий бал если клиент оставит чаевые, также учитывать уровень английского и то что она держит контекст всего диалога, сообщения последовательны\r\n\r\nВАЖНО: ВСЕ РЕЗУЛЬТАТЫ АНАЛИЗА ДОЛЖНЫ БЫТЬ ТОЛЬКО НА РУССКОМ ЯЗЫКЕ, ВКЛЮЧАЯ ВСЕ ВЕРДИКТЫ, ЗАКЛЮЧЕНИЯ, СПИСКИ СИЛЬНЫХ И СЛАБЫХ СТОРОН. НЕ ИСПОЛЬЗОВАТЬ АНГЛИЙСКИЙ ЯЗЫК НИ В КАКИХ ЧАСТЯХ ОТВЕТА.\r\n\r\nСТРОГО ОТВЕЧАЙ ТОЛЬКО В JSON ФОРМАТЕ, БЕЗ ДОПОЛНИТЕЛЬНОГО ТЕКСТА ДО ИЛИ ПОСЛЕ JSON.\r\n\r\nПредоставь результат анализа в формате JSON:\r\n\r\n{\r\n  \"dialog_analysis\": {\r\n    \"metrics\": {\r\n      \"engagement\": {\r\n        \"score\": ,\r\n        \"verdict\": \"\"\r\n      },\r\n      \"charm_and_tone\": {\r\n        \"score\": ,\r\n        \"verdict\": \"\"\r\n      },\r\n      \"creativity\": {\r\n        \"score\": ,\r\n        \"verdict\": \"\"\r\n      },\r\n      \"adaptability\": {\r\n        \"score\": ,\r\n        \"verdict\": \"\"\r\n      },\r\n      \"self_promotion\": {\r\n        \"score\": ,\r\n        \"verdict\": \"\"\r\n      },\r\n      \"pricing_policy\": {\r\n        \"score\": ,\r\n        \"verdict\": \"\",\r\n        \"strengths\": [],\r\n        \"improvements\": []\r\n      },\r\n      \"sales_stages\": {\r\n        \"introduction\": {\r\n          \"score\": ,\r\n          \"strengths\": [],\r\n          \"weaknesses\": []\r\n        },\r\n        \"warmup\": {\r\n          \"score\": ,\r\n          \"strengths\": [],\r\n          \"weaknesses\": []\r\n        },\r\n        \"closing\": {\r\n          \"score\": ,\r\n          \"strengths\": [],\r\n          \"weaknesses\": []\r\n        }\r\n      }\r\n    },\r\n    \"overall_conclusion\": \"\",\r\n    \"result_summary\": \"\"\r\n  }\r\n}\r\n\r\n\"result_summary\" - это краткое (до 200 слов) резюме результатов анализа, включающее общую оценку соискателя, его основные сильные стороны и рекомендации по улучшению. Этот текст будет показан пользователю как итоговый вывод анализа.\r\n\r\nВот диалоги для анализа:\r\n`;\n        // Формируем части промпта из каждого чата\n        const chatPrompts = chats.map((chat)=>{\n            const chatNumber = chat.chat_number;\n            let characterType = \"\";\n            switch(chatNumber){\n                case 1:\n                    characterType = \"Страстный клиент (Marcus)\";\n                    break;\n                case 2:\n                    characterType = \"Капризный клиент (Shrek)\";\n                    break;\n                case 3:\n                    characterType = \"Экономный клиент, торгующийся о цене (Oliver)\";\n                    break;\n                case 4:\n                    characterType = \"Провокационный клиент, проверяющий границы (Alex)\";\n                    break;\n                default:\n                    characterType = `Клиент ${chatNumber}`;\n            }\n            const messages = chat.messages || [];\n            if (messages.length === 0) {\n                return `\\n\\n--- Чат ${chatNumber} (${characterType}) ---\\nНет сообщений`;\n            }\n            const formattedMessages = messages.map((msg)=>{\n                const roleLabel = msg.isOwn ? \"Соискатель\" : `AI-клиент (${characterType})`;\n                return `${roleLabel}: ${msg.content}`;\n            }).join(\"\\n\");\n            return `\\n\\n--- Чат ${chatNumber} (${characterType}) ---\\n${formattedMessages}`;\n        }).join(\"\");\n        // Собираем полный промпт\n        const fullPrompt = promptHeader + chatPrompts;\n        console.log(\"Analysis prompt generated successfully, length:\", fullPrompt.length);\n        return fullPrompt;\n    } catch (error) {\n        console.error(\"Error generating analysis prompt:\", error);\n        throw error;\n    }\n}\nasync function saveCandidateForm(userId, formData) {\n    try {\n        console.log(\"Saving candidate form data for user:\", userId, formData);\n        // Получаем ID сотрудника из параметра\n        const employeeId = userId;\n        if (!employeeId) {\n            throw new Error(\"ID сотрудника не найден. Пожалуйста, начните процесс регистрации заново.\");\n        }\n        // Обновляем имя сотрудника в таблице employees\n        if (formData.first_name) {\n            const { error: nameUpdateError } = await supabase.from(\"employees\").update({\n                first_name: formData.first_name\n            }).eq(\"id\", employeeId);\n            if (nameUpdateError) {\n                console.error(\"Error updating employee name:\", nameUpdateError);\n            // Продолжаем процесс даже при ошибке обновления имени\n            }\n        }\n        // Проверяем, существует ли уже анкета для этого сотрудника\n        const { data: existingForm, error: checkError } = await supabase.from(\"candidate_forms\").select(\"id\").eq(\"employee_id\", employeeId).single();\n        if (checkError && checkError.code !== \"PGRST116\") {\n            console.error(\"Error checking existing form:\", checkError);\n        // Продолжаем процесс даже при ошибке\n        }\n        // Подготавливаем данные анкеты\n        const formDataToSave = {\n            telegram_tag: formData.telegram_tag,\n            shift: formData.shift,\n            experience: formData.experience,\n            motivation: formData.motivation,\n            about_me: formData.about_me,\n            updated_at: new Date().toISOString()\n        };\n        let result;\n        // Если анкета уже существует, обновляем её\n        if (existingForm) {\n            console.log(\"Updating existing candidate form:\", existingForm.id);\n            const { data, error } = await supabase.from(\"candidate_forms\").update(formDataToSave).eq(\"id\", existingForm.id).select().single();\n            if (error) {\n                console.error(\"Error updating candidate form:\", error);\n                throw new Error(`Error updating candidate form: ${error.message}`);\n            }\n            result = data;\n        } else {\n            // Иначе создаем новую анкету\n            console.log(\"Creating new candidate form for employee:\", employeeId);\n            // Добавляем employee_id к данным анкеты\n            const newFormData = {\n                ...formDataToSave,\n                employee_id: employeeId\n            };\n            const { data, error } = await supabase.from(\"candidate_forms\").insert([\n                newFormData\n            ]).select().single();\n            if (error) {\n                console.error(\"Error saving candidate form:\", error);\n                throw new Error(`Error saving candidate form: ${error.message}`);\n            }\n            result = data;\n        }\n        console.log(\"Candidate form saved successfully:\", result);\n        // Очищаем sessionStorage после успешного сохранения\n        sessionStorage.removeItem(\"candidateFormData\");\n        // Сохраняем employee_id в возвращаемых данных для последующего использования\n        return {\n            ...result,\n            employee_id: employeeId\n        };\n    } catch (error) {\n        console.error(\"Error in saveCandidateForm:\", error);\n        throw error;\n    }\n}\n// Функция для получения данных анкеты соискателя по id сотрудника\nasync function getCandidateFormByEmployeeId(employeeId) {\n    try {\n        const { data, error } = await supabase.from(\"candidate_forms\").select(\"*\").eq(\"employee_id\", employeeId).single();\n        if (error) {\n            console.error(\"Error fetching candidate form:\", error);\n            return null;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Error in getCandidateFormByEmployeeId:\", error);\n        return null;\n    }\n}\nasync function createUser(userData) {\n    try {\n        const { data, error } = await supabase.from(\"users\").insert([\n            {\n                first_name: userData.first_name,\n                email: userData.email,\n                phone: userData.phone\n            }\n        ]).select();\n        if (error) {\n            console.error(\"Error creating user:\", error);\n            throw new Error(\"Failed to create user\");\n        }\n        if (!data || data.length === 0) {\n            throw new Error(\"No data returned from the database\");\n        }\n        return data[0];\n    } catch (error) {\n        console.error(\"Error in createUser:\", error);\n        throw error;\n    }\n}\n/**\r\n * Создает и сохраняет токен для доступа кандидата к форме регистрации\r\n */ async function createCandidateToken(employeeId) {\n    try {\n        console.log(\"Creating candidate token for employee:\", employeeId);\n        // Генерируем уникальный токен\n        const token = Math.random().toString(36).substring(2, 10) + Date.now().toString(36) + Math.random().toString(36).substring(2, 10);\n        // Устанавливаем срок действия токена (7 дней)\n        const expiresAt = new Date();\n        expiresAt.setDate(expiresAt.getDate() + 7);\n        // Деактивируем все предыдущие токены для этого сотрудника\n        try {\n            await supabase.from(\"candidate_tokens\").update({\n                is_used: true\n            }).eq(\"employee_id\", employeeId).eq(\"is_used\", false);\n            console.log(\"Deactivated previous tokens for employee:\", employeeId);\n        } catch (deactivateError) {\n            console.warn(\"Error deactivating previous tokens:\", deactivateError);\n        // Продолжаем выполнение даже при ошибке\n        }\n        // Сохраняем новый токен в базе данных\n        const { data, error } = await supabase.from(\"candidate_tokens\").insert([\n            {\n                employee_id: employeeId,\n                token: token,\n                expires_at: expiresAt.toISOString(),\n                is_used: false\n            }\n        ]).select().single();\n        if (error) {\n            console.error(\"Error creating candidate token:\", error);\n            throw new Error(`Failed to create candidate token: ${error.message}`);\n        }\n        if (!data) {\n            throw new Error(\"No data returned from candidate token creation\");\n        }\n        console.log(\"Token created successfully:\", data.token);\n        return data.token;\n    } catch (error) {\n        console.error(\"Error in createCandidateToken:\", error);\n        throw error;\n    }\n}\n/**\r\n * Проверяет валидность токена кандидата и возвращает ID сотрудника\r\n */ async function validateCandidateToken(token) {\n    try {\n        console.log(\"Validating candidate token:\", token);\n        // Получаем токен из базы данных\n        const { data, error } = await supabase.from(\"candidate_tokens\").select(\"id, employee_id, expires_at, is_used\").eq(\"token\", token).single();\n        if (error) {\n            console.error(\"Error validating token:\", error);\n            return null;\n        }\n        // Проверяем, не истек ли срок действия токена\n        const expiresAt = new Date(data.expires_at);\n        const now = new Date();\n        if (expiresAt < now) {\n            console.error(\"Token has expired:\", {\n                token: token,\n                expiresAt: expiresAt.toISOString(),\n                now: now.toISOString()\n            });\n            return null;\n        }\n        // Помечаем токен как использованный\n        const { error: updateError } = await supabase.from(\"candidate_tokens\").update({\n            is_used: true,\n            last_used_at: new Date().toISOString(),\n            ip_address: window.location.hostname,\n            user_agent: navigator.userAgent\n        }).eq(\"id\", data.id);\n        if (updateError) {\n            console.warn(\"Error updating token usage status:\", updateError);\n        // Продолжаем даже если обновление статуса не удалось\n        }\n        console.log(\"Token validated successfully for employee:\", data.employee_id);\n        return data.employee_id;\n    } catch (error) {\n        console.error(\"Exception in validateCandidateToken:\", error);\n        return null;\n    }\n}\nasync function getCandidateForm(employeeId) {\n    try {\n        if (!employeeId) {\n            console.error(\"No employee ID provided for getCandidateForm\");\n            return null;\n        }\n        const { data, error } = await supabase.from(\"candidate_forms\").select(\"*\").eq(\"employee_id\", employeeId).single();\n        if (error) {\n            console.error(\"Error fetching candidate form:\", error);\n            return null;\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Exception in getCandidateForm:\", error);\n        return null;\n    }\n}\n// Функция для обновления статуса чата (печатание, прочитано и т.д.)\nasync function updateChatStatus(sessionId, chatNumber, status) {\n    try {\n        const session = await getTestSession(sessionId);\n        if (!session) {\n            throw new Error(\"Сессия не найдена\");\n        }\n        if (session.completed) {\n            throw new Error(\"Невозможно обновить статус для завершенной сессии\");\n        }\n        // В зависимости от реализации базы данных, здесь нужно будет обновить статус чата\n        // Например, можно использовать таблицу chat_status или добавить метаданные к сессии\n        // Пример реализации (нужно адаптировать под вашу структуру данных)\n        const { data, error } = await supabase.from(\"test_sessions\").update({\n            [`chat_${chatNumber}_status`]: status\n        }).eq(\"id\", sessionId).select();\n        if (error) {\n            throw error;\n        }\n        return data?.[0] || null;\n    } catch (error) {\n        console.error(\"Error updating chat status:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L3N1cGFiYXNlLnRzPzA2ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbi8vINCe0LHQvdC+0LLQu9GP0LXQvCDQtNC+0YHRgtGD0L8g0Log0L/QtdGA0LXQvNC10L3QvdGL0Lwg0L7QutGA0YPQttC10L3QuNGPINC90LAg0YTQvtGA0LzQsNGCIE5leHQuanNcclxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XHJcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZO1xyXG5cclxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG59XHJcblxyXG5jb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIFN1cGFiYXNlIGNsaWVudCB3aXRoIFVSTDonLCBzdXBhYmFzZVVybCk7XHJcblxyXG4vLyDQodC+0LfQtNCw0LXQvCDQutC70LjQtdC90YLQsCDRgSDRgNCw0YHRiNC40YDQtdC90L3Ri9C80Lgg0L7Qv9GG0LjRj9C80LhcclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcclxuICBhdXRoOiB7XHJcbiAgICBhdXRvUmVmcmVzaFRva2VuOiB0cnVlLFxyXG4gICAgcGVyc2lzdFNlc3Npb246IHRydWVcclxuICB9LFxyXG4gIGdsb2JhbDoge1xyXG4gICAgZmV0Y2g6IGZldGNoLmJpbmQoZ2xvYmFsVGhpcylcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INGB0L7QtdC00LjQvdC10L3QuNC1INC/0YDQuCDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuFxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnYWRtaW5fdXNlcnMnKS5zZWxlY3QoJ2NvdW50JykubGltaXQoMSk7XHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGluaXRpYWxpemF0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgU3VwYWJhc2UgaW5pdGlhbGl6YXRpb246JywgZXJyKTtcclxuICAgIH1cclxuICB9XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEVtcGxveWVlIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGZpcnN0X25hbWU6IHN0cmluZztcclxuICBkZXBhcnRtZW50Pzogc3RyaW5nO1xyXG4gIGxldmVsPzogc3RyaW5nO1xyXG4gIHN1Y2Nlc3M/OiBudW1iZXI7XHJcbiAgaW1wcm92ZW1lbnQ/OiBzdHJpbmc7XHJcbiAgdHJlbmQ/OiBzdHJpbmc7XHJcbiAgc3RhdHVzPzogc3RyaW5nO1xyXG4gIGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FuZGlkYXRlVG9rZW4ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZW1wbG95ZWVfaWQ6IHN0cmluZztcclxuICB0b2tlbjogc3RyaW5nO1xyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcclxuICBleHBpcmVzX2F0OiBzdHJpbmc7XHJcbiAgaXNfdXNlZDogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDaGF0TWVzc2FnZSB7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIHRpbWU6IHN0cmluZztcclxuICBpc093bjogYm9vbGVhbjtcclxuICBpc1JlYWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENoYXQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGVzdF9zZXNzaW9uX2lkOiBzdHJpbmc7XHJcbiAgY2hhdF9udW1iZXI6IDEgfCAyIHwgMyB8IDQ7XHJcbiAgbWVzc2FnZXM6IENoYXRNZXNzYWdlW107XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUZXN0U2Vzc2lvbiB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBlbXBsb3llZV9pZDogc3RyaW5nO1xyXG4gIHN0YXJ0X3RpbWU6IHN0cmluZztcclxuICBlbmRfdGltZT86IHN0cmluZztcclxuICBjb21wbGV0ZWQ6IGJvb2xlYW47XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcclxuICBlbXBsb3llZT86IHtcclxuICAgIGZpcnN0X25hbWU6IHN0cmluZztcclxuICB9O1xyXG4gIGNoYXRzPzogQ2hhdFtdO1xyXG59XHJcblxyXG4vLyDQmNC90YLQtdGA0YTQtdC50YEg0LTQu9GPINGA0LXQt9GD0LvRjNGC0LDRgtC+0LIg0LDQvdCw0LvQuNC30LAg0LTQuNCw0LvQvtCz0L7QslxyXG5leHBvcnQgaW50ZXJmYWNlIERpYWxvZ0FuYWx5c2lzUmVzdWx0IHtcclxuICBkaWFsb2dfYW5hbHlzaXM6IHtcclxuICAgIG1ldHJpY3M6IHtcclxuICAgICAgZW5nYWdlbWVudDoge1xyXG4gICAgICAgIHNjb3JlOiBudW1iZXI7XHJcbiAgICAgICAgdmVyZGljdDogc3RyaW5nO1xyXG4gICAgICB9O1xyXG4gICAgICBjaGFybV9hbmRfdG9uZToge1xyXG4gICAgICAgIHNjb3JlOiBudW1iZXI7XHJcbiAgICAgICAgdmVyZGljdDogc3RyaW5nO1xyXG4gICAgICB9O1xyXG4gICAgICBjcmVhdGl2aXR5OiB7XHJcbiAgICAgICAgc2NvcmU6IG51bWJlcjtcclxuICAgICAgICB2ZXJkaWN0OiBzdHJpbmc7XHJcbiAgICAgIH07XHJcbiAgICAgIGFkYXB0YWJpbGl0eToge1xyXG4gICAgICAgIHNjb3JlOiBudW1iZXI7XHJcbiAgICAgICAgdmVyZGljdDogc3RyaW5nO1xyXG4gICAgICB9O1xyXG4gICAgICBzZWxmX3Byb21vdGlvbjoge1xyXG4gICAgICAgIHNjb3JlOiBudW1iZXI7XHJcbiAgICAgICAgdmVyZGljdDogc3RyaW5nO1xyXG4gICAgICB9O1xyXG4gICAgICBwcmljaW5nX3BvbGljeToge1xyXG4gICAgICAgIHNjb3JlOiBudW1iZXI7XHJcbiAgICAgICAgdmVyZGljdDogc3RyaW5nO1xyXG4gICAgICAgIHN0cmVuZ3Rocz86IHN0cmluZ1tdO1xyXG4gICAgICAgIGltcHJvdmVtZW50cz86IHN0cmluZ1tdO1xyXG4gICAgICB9O1xyXG4gICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0L7RhtC10L3QutGDINC/0L4g0YLRgNC10Lwg0Y3RgtCw0L/QsNC8INC/0YDQvtC00LDQtlxyXG4gICAgICBzYWxlc19zdGFnZXM/OiB7XHJcbiAgICAgICAgaW50cm9kdWN0aW9uOiB7XHJcbiAgICAgICAgICBzY29yZTogbnVtYmVyO1xyXG4gICAgICAgICAgc3RyZW5ndGhzOiBzdHJpbmdbXTtcclxuICAgICAgICAgIHdlYWtuZXNzZXM6IHN0cmluZ1tdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgd2FybXVwOiB7XHJcbiAgICAgICAgICBzY29yZTogbnVtYmVyO1xyXG4gICAgICAgICAgc3RyZW5ndGhzOiBzdHJpbmdbXTtcclxuICAgICAgICAgIHdlYWtuZXNzZXM6IHN0cmluZ1tdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2xvc2luZzoge1xyXG4gICAgICAgICAgc2NvcmU6IG51bWJlcjtcclxuICAgICAgICAgIHN0cmVuZ3Roczogc3RyaW5nW107XHJcbiAgICAgICAgICB3ZWFrbmVzc2VzOiBzdHJpbmdbXTtcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgfTtcclxuICAgIG92ZXJhbGxfY29uY2x1c2lvbjogc3RyaW5nO1xyXG4gICAgcmVzdWx0X3N1bW1hcnk/OiBzdHJpbmc7XHJcbiAgfTtcclxufVxyXG5cclxuLy8g0JjQvdGC0LXRgNGE0LXQudGBINC00LvRjyDRgNC10LfRg9C70YzRgtCw0YLQvtCyINGC0LXRgdGC0LjRgNC+0LLQsNC90LjRj1xyXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RSZXN1bHQge1xyXG4gIGlkPzogc3RyaW5nO1xyXG4gIHRlc3Rfc2Vzc2lvbl9pZDogc3RyaW5nO1xyXG4gIGVtcGxveWVlX2lkOiBzdHJpbmc7XHJcbiAgcmF3X3Byb21wdD86IHN0cmluZztcclxuICBhbmFseXNpc19yZXN1bHQ/OiBEaWFsb2dBbmFseXNpc1Jlc3VsdDtcclxuICBlbmdhZ2VtZW50X3Njb3JlPzogbnVtYmVyO1xyXG4gIGNoYXJtX3RvbmVfc2NvcmU/OiBudW1iZXI7XHJcbiAgY3JlYXRpdml0eV9zY29yZT86IG51bWJlcjtcclxuICBhZGFwdGFiaWxpdHlfc2NvcmU/OiBudW1iZXI7XHJcbiAgc2VsZl9wcm9tb3Rpb25fc2NvcmU/OiBudW1iZXI7XHJcbiAgcHJpY2luZ19wb2xpY3lfc2NvcmU/OiBudW1iZXI7XHJcbiAgb3ZlcmFsbF9zY29yZT86IG51bWJlcjtcclxuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xyXG4gIHVwZGF0ZWRfYXQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FuZGlkYXRlRm9ybSB7XHJcbiAgaWQ/OiBzdHJpbmc7XHJcbiAgZW1wbG95ZWVfaWQ/OiBzdHJpbmc7XHJcbiAgdGVsZWdyYW1fdGFnOiBzdHJpbmc7XHJcbiAgc2hpZnQ6IHN0cmluZztcclxuICBleHBlcmllbmNlOiBzdHJpbmc7XHJcbiAgbW90aXZhdGlvbjogc3RyaW5nO1xyXG4gIGFib3V0X21lOiBzdHJpbmc7XHJcbiAgY3JlYXRlZF9hdD86IHN0cmluZztcclxufVxyXG5cclxuLy8g0JjQvdGC0LXRgNGE0LXQudGBINC00LvRjyDQtNCw0L3QvdGL0YUg0LDQvdC60LXRgtGLINGB0L7QuNGB0LrQsNGC0LXQu9GPXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FuZGlkYXRlRm9ybURhdGEge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGVsZWdyYW1fdGFnOiBzdHJpbmc7XHJcbiAgc2hpZnQ6IHN0cmluZztcclxuICBleHBlcmllbmNlOiBzdHJpbmc7XHJcbiAgbW90aXZhdGlvbjogc3RyaW5nO1xyXG4gIGFib3V0X21lOiBzdHJpbmc7XHJcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG4gIGVtcGxveWVlX2lkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBmaXJzdF9uYW1lOiBzdHJpbmc7XHJcbiAgZW1haWw6IHN0cmluZztcclxuICBwaG9uZTogc3RyaW5nO1xyXG4gIGNyZWF0ZWRfYXQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIEVtcGxveWVlIGZ1bmN0aW9uc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRW1wbG95ZWUoZW1wbG95ZWVEYXRhOiB7XHJcbiAgZmlyc3RfbmFtZTogc3RyaW5nO1xyXG4gIGRlcGFydG1lbnQ/OiBzdHJpbmc7XHJcbiAgbGV2ZWw/OiBzdHJpbmc7XHJcbiAgc3VjY2Vzcz86IG51bWJlcjtcclxuICBpbXByb3ZlbWVudD86IHN0cmluZztcclxuICB0cmVuZD86IHN0cmluZztcclxuICBzdGF0dXM/OiBzdHJpbmc7XHJcbn0pOiBQcm9taXNlPEVtcGxveWVlPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdlbXBsb3llZXMnKVxyXG4gICAgICAuaW5zZXJ0KFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiBlbXBsb3llZURhdGEuZmlyc3RfbmFtZSxcclxuICAgICAgICAgIGRlcGFydG1lbnQ6IGVtcGxveWVlRGF0YS5kZXBhcnRtZW50IHx8ICdDYW5kaWRhdGVzJyxcclxuICAgICAgICAgIGxldmVsOiBlbXBsb3llZURhdGEubGV2ZWwgfHwgJ0NhbmRpZGF0ZScsXHJcbiAgICAgICAgICBzdWNjZXNzOiBlbXBsb3llZURhdGEuc3VjY2VzcyAhPT0gdW5kZWZpbmVkID8gZW1wbG95ZWVEYXRhLnN1Y2Nlc3MgOiAwLFxyXG4gICAgICAgICAgaW1wcm92ZW1lbnQ6IGVtcGxveWVlRGF0YS5pbXByb3ZlbWVudCB8fCAnMCUnLFxyXG4gICAgICAgICAgdHJlbmQ6IGVtcGxveWVlRGF0YS50cmVuZCB8fCAndXAnLFxyXG4gICAgICAgICAgc3RhdHVzOiBlbXBsb3llZURhdGEuc3RhdHVzIHx8ICfQndC+0LLRi9C5INGB0L7RgtGA0YPQtNC90LjQuicsXHJcbiAgICAgICAgfSxcclxuICAgICAgXSlcclxuICAgICAgLnNlbGVjdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBlbXBsb3llZTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBlbXBsb3llZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRhdGEgcmV0dXJuZWQgZnJvbSB0aGUgZGF0YWJhc2UnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YVswXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY3JlYXRlRW1wbG95ZWU6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW1wbG95ZWVzKCkge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnZW1wbG95ZWVzJylcclxuICAgIC5zZWxlY3QoJyonKVxyXG4gICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGVtcGxveWVlczonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGZldGNoaW5nIGVtcGxveWVlczogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbXBsb3llZShpZDogc3RyaW5nKTogUHJvbWlzZTxFbXBsb3llZT4ge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnZW1wbG95ZWVzJylcclxuICAgIC5zZWxlY3QoJyonKVxyXG4gICAgLmVxKCdpZCcsIGlkKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGVtcGxveWVlOicsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZmV0Y2hpbmcgZW1wbG95ZWU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcblxyXG4gIGlmICghZGF0YSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdFbXBsb3llZSBub3QgZm91bmQnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1wbG95ZWUoXHJcbiAgaWQ6IHN0cmluZyxcclxuICBlbXBsb3llZURhdGE6IHtcclxuICAgIGZpcnN0X25hbWU/OiBzdHJpbmc7XHJcbiAgICBkZXBhcnRtZW50Pzogc3RyaW5nO1xyXG4gICAgbGV2ZWw/OiBzdHJpbmc7XHJcbiAgICBzdWNjZXNzPzogbnVtYmVyO1xyXG4gICAgaW1wcm92ZW1lbnQ/OiBzdHJpbmc7XHJcbiAgICB0cmVuZD86IHN0cmluZztcclxuICAgIHN0YXR1cz86IHN0cmluZztcclxuICB9XHJcbik6IFByb21pc2U8RW1wbG95ZWU+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2VtcGxveWVlcycpXHJcbiAgICAgIC51cGRhdGUoZW1wbG95ZWVEYXRhKVxyXG4gICAgICAuZXEoJ2lkJywgaWQpXHJcbiAgICAgIC5zZWxlY3QoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZW1wbG95ZWU6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgZW1wbG95ZWUnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkYXRhIHJldHVybmVkIGZyb20gdGhlIGRhdGFiYXNlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGFbMF07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHVwZGF0ZUVtcGxveWVlOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUVtcGxveWVlKGlkOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2VtcGxveWVlcycpXHJcbiAgICAuZGVsZXRlKClcclxuICAgIC5lcSgnaWQnLCBpZCk7XHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZW1wbG95ZWU6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBkZWxldGluZyBlbXBsb3llZTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gVGVzdCBzZXNzaW9uIGZ1bmN0aW9uc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVGVzdFNlc3Npb24oXHJcbiAgZW1wbG95ZWVJZDogc3RyaW5nXHJcbik6IFByb21pc2U8VGVzdFNlc3Npb24+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CflIQgQ3JlYXRpbmcgdGVzdCBzZXNzaW9uOicsIHsgZW1wbG95ZWVJZCB9KTtcclxuICAgIFxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRgdGD0YnQtdGB0YLQstGD0Y7RgiDQu9C4INGD0LbQtSDQsNC60YLQuNCy0L3Ri9C1INGB0LXRgdGB0LjQuCDQtNC70Y8g0Y3RgtC+0LPQviDRgdC+0YLRgNGD0LTQvdC40LrQsFxyXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Nlc3Npb25zLCBlcnJvcjogY2hlY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Rlc3Rfc2Vzc2lvbnMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdlbXBsb3llZV9pZCcsIGVtcGxveWVlSWQpXHJcbiAgICAgIC5lcSgnY29tcGxldGVkJywgZmFsc2UpXHJcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG4gICAgICAubGltaXQoMSk7XHJcbiAgICBcclxuICAgIGlmIChjaGVja0Vycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBjaGVja2luZyBleGlzdGluZyBzZXNzaW9uczonLCBjaGVja0Vycm9yKTtcclxuICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdTZXNzaW9ucyAmJiBleGlzdGluZ1Nlc3Npb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ/CflI0gRm91bmQgZXhpc3RpbmcgYWN0aXZlIHNlc3Npb24gZm9yIGVtcGxveWVlOicsIGV4aXN0aW5nU2Vzc2lvbnNbMF0pO1xyXG4gICAgICBcclxuICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRgdGD0YnQtdGB0YLQstGD0Y7RgiDQu9C4INGH0LDRgtGLINC00LvRjyDRjdGC0L7QuSDRgdC10YHRgdC40LhcclxuICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ0NoYXRzLCBlcnJvcjogY2hhdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdjaGF0cycpXHJcbiAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgLmVxKCd0ZXN0X3Nlc3Npb25faWQnLCBleGlzdGluZ1Nlc3Npb25zWzBdLmlkKVxyXG4gICAgICAgIC5vcmRlcignY2hhdF9udW1iZXInKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghY2hhdEVycm9yICYmIGV4aXN0aW5nQ2hhdHMgJiYgZXhpc3RpbmdDaGF0cy5sZW5ndGggPT09IDQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIFVzaW5nIGV4aXN0aW5nIHNlc3Npb24gd2l0aCBhbGwgNCBjaGF0czonLCBcclxuICAgICAgICAgIGV4aXN0aW5nQ2hhdHMubWFwKGMgPT4gKHsgaWQ6IGMuaWQsIGNoYXROdW1iZXI6IGMuY2hhdF9udW1iZXIgfSkpKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4uZXhpc3RpbmdTZXNzaW9uc1swXSxcclxuICAgICAgICAgIGNoYXRzOiBleGlzdGluZ0NoYXRzXHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIGlmICghY2hhdEVycm9yICYmIGV4aXN0aW5nQ2hhdHMgJiYgZXhpc3RpbmdDaGF0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRm91bmQgc2Vzc2lvbiB3aXRoIGluY29tcGxldGUgY2hhdHM6JywgZXhpc3RpbmdDaGF0cy5sZW5ndGgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfinpUgQ3JlYXRpbmcgbWlzc2luZyBjaGF0cy4uLicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vINCd0LDRhdC+0LTQuNC8LCDQutCw0LrQuNGFINGH0LDRgtC+0LIg0L3QtSDRhdCy0LDRgtCw0LXRglxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2hhdE51bWJlcnMgPSBleGlzdGluZ0NoYXRzLm1hcChjID0+IGMuY2hhdF9udW1iZXIpO1xyXG4gICAgICAgIGNvbnN0IG1pc3NpbmdDaGF0TnVtYmVycyA9IFsxLCAyLCAzLCA0XS5maWx0ZXIobnVtID0+ICFleGlzdGluZ0NoYXROdW1iZXJzLmluY2x1ZGVzKG51bSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChtaXNzaW5nQ2hhdE51bWJlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gTWlzc2luZyBjaGF0IG51bWJlcnM6JywgbWlzc2luZ0NoYXROdW1iZXJzKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g0KHQvtC30LTQsNC10Lwg0L3QtdC00L7RgdGC0LDRjtGJ0LjQtSDRh9Cw0YLRi1xyXG4gICAgICAgICAgY29uc3QgYWRkaXRpb25hbENoYXRSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwobWlzc2luZ0NoYXROdW1iZXJzLm1hcChjaGF0TnVtYmVyID0+IFxyXG4gICAgICAgICAgICBzdXBhYmFzZVxyXG4gICAgICAgICAgICAgIC5mcm9tKCdjaGF0cycpXHJcbiAgICAgICAgICAgICAgLmluc2VydChbe1xyXG4gICAgICAgICAgICAgICAgdGVzdF9zZXNzaW9uX2lkOiBleGlzdGluZ1Nlc3Npb25zWzBdLmlkLFxyXG4gICAgICAgICAgICAgICAgY2hhdF9udW1iZXI6IGNoYXROdW1iZXIsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW11cclxuICAgICAgICAgICAgICB9XSlcclxuICAgICAgICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAgICAgICAuc2luZ2xlKClcclxuICAgICAgICAgICkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCBhbGxDaGF0cyA9IFsuLi5leGlzdGluZ0NoYXRzXTtcclxuICAgICAgICAgIGxldCBhZGRpdGlvbmFsQ2hhdHNDcmVhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRh9GC0L4g0LLRgdC1INC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdGL0LUg0YfQsNGC0Ysg0YHQvtC30LTQsNC90Ysg0YPRgdC/0LXRiNC90L5cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkaXRpb25hbENoYXRSZXN1bHRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGFkZGl0aW9uYWxDaGF0UmVzdWx0c1tpXTtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm9yIGNyZWF0aW5nIG1pc3NpbmcgY2hhdCAke21pc3NpbmdDaGF0TnVtYmVyc1tpXX06YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgIGFkZGl0aW9uYWxDaGF0c0NyZWF0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIE1pc3NpbmcgY2hhdCAke21pc3NpbmdDaGF0TnVtYmVyc1tpXX0gY3JlYXRlZCBzdWNjZXNzZnVsbHlgKTtcclxuICAgICAgICAgICAgICBhbGxDaGF0cy5wdXNoKGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChhZGRpdGlvbmFsQ2hhdHNDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQWxsIG1pc3NpbmcgY2hhdHMgY3JlYXRlZCwgdXNpbmcgZXhpc3Rpbmcgc2Vzc2lvbiB3aXRoIGNvbXBsZXRlIGNoYXRzJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgLi4uZXhpc3RpbmdTZXNzaW9uc1swXSxcclxuICAgICAgICAgICAgICBjaGF0czogYWxsQ2hhdHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gRXhpc3Rpbmcgc2Vzc2lvbiBoYXMgaW5jb21wbGV0ZSBjaGF0cywgcHJvY2VlZGluZyB0byBjcmVhdGUgbmV3IHNlc3Npb24nKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g0KHQvtC30LTQsNC10Lwg0YLQtdGB0YLQvtCy0YPRjiDRgdC10YHRgdC40Y5cclxuICAgIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiwgZXJyb3I6IHNlc3Npb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Rlc3Rfc2Vzc2lvbnMnKVxyXG4gICAgICAuaW5zZXJ0KFt7XHJcbiAgICAgICAgZW1wbG95ZWVfaWQ6IGVtcGxveWVlSWQsXHJcbiAgICAgICAgc3RhcnRfdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGNvbXBsZXRlZDogZmFsc2VcclxuICAgICAgfV0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHNlc3Npb25FcnJvciB8fCAhc2Vzc2lvbikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGNyZWF0ZSB0ZXN0IHNlc3Npb246Jywgc2Vzc2lvbkVycm9yKTtcclxuICAgICAgdGhyb3cgc2Vzc2lvbkVycm9yIHx8IG5ldyBFcnJvcignTm8gZGF0YSByZXR1cm5lZCBmcm9tIHRlc3Qgc2Vzc2lvbiBjcmVhdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCfinIUgVGVzdCBzZXNzaW9uIGNyZWF0ZWQ6JywgeyBcclxuICAgICAgaWQ6IHNlc3Npb24uaWQsIFxyXG4gICAgICBlbXBsb3llZUlkOiBzZXNzaW9uLmVtcGxveWVlX2lkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC10LwgNCDQv9GD0YHRgtGL0YUg0YfQsNGC0LAg0LTQu9GPINGB0LXRgdGB0LjQuFxyXG4gICAgY29uc29sZS5sb2coJ/CflIQgQ3JlYXRpbmcgNCBjaGF0cyBmb3Igc2Vzc2lvbjonLCBzZXNzaW9uLmlkKTtcclxuICAgIFxyXG4gICAgY29uc3QgY2hhdFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChbMSwgMiwgMywgNF0ubWFwKGNoYXROdW1iZXIgPT4gXHJcbiAgICAgIHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2NoYXRzJylcclxuICAgICAgICAuaW5zZXJ0KFt7XHJcbiAgICAgICAgICB0ZXN0X3Nlc3Npb25faWQ6IHNlc3Npb24uaWQsXHJcbiAgICAgICAgICBjaGF0X251bWJlcjogY2hhdE51bWJlcixcclxuICAgICAgICAgIG1lc3NhZ2VzOiBbXVxyXG4gICAgICAgIH1dKVxyXG4gICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgIC5zaW5nbGUoKVxyXG4gICAgKSk7XHJcblxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRh9GC0L4g0LLRgdC1INGH0LDRgtGLINGB0L7Qt9C00LDQvdGLINGD0YHQv9C10YjQvdC+XHJcbiAgICBjb25zdCBjaGF0RXJyb3JzID0gW107XHJcbiAgICBjb25zdCBjcmVhdGVkQ2hhdHMgPSBbXTtcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGF0UmVzdWx0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBjaGF0UmVzdWx0c1tpXTtcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm9yIGNyZWF0aW5nIGNoYXQgJHtpKzF9OmAsIGVycm9yKTtcclxuICAgICAgICBjaGF0RXJyb3JzLnB1c2goeyBjaGF0TnVtYmVyOiBpKzEsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUgQ2hhdCAke2krMX0gY3JlYXRlZCBzdWNjZXNzZnVsbHk6YCwgeyBcclxuICAgICAgICAgIGlkOiBkYXRhLmlkLCBcclxuICAgICAgICAgIHRlc3Rfc2Vzc2lvbl9pZDogZGF0YS50ZXN0X3Nlc3Npb25faWQsXHJcbiAgICAgICAgICBjaGF0X251bWJlcjogZGF0YS5jaGF0X251bWJlclxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNyZWF0ZWRDaGF0cy5wdXNoKGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChjaGF0RXJyb3JzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjcmVhdGUgYWxsIGNoYXRzOicsIGNoYXRFcnJvcnMpO1xyXG4gICAgICBcclxuICAgICAgLy8g0JXRgdC70Lgg0YXQvtGC0Ywg0LrQsNC60LjQtS3RgtC+INGH0LDRgtGLINGB0L7Qt9C00LDQvdGLLCDQv9GA0L7QtNC+0LvQttCw0LXQvCDRgSDQvdC40LzQuFxyXG4gICAgICBpZiAoY3JlYXRlZENoYXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBDb250aW51aW5nIHdpdGggJHtjcmVhdGVkQ2hhdHMubGVuZ3RofSBjcmVhdGVkIGNoYXRzIGluc3RlYWQgb2YgNGApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBhbnkgY2hhdHMgZm9yIHRlc3Qgc2Vzc2lvbicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0J/QvtCy0YLQvtGA0L3QviDQv9C+0LvRg9GH0LDQtdC8INGB0L7Qt9C00LDQvdC90YvQtSDRh9Cw0YLRiyDQtNC70Y8g0LHQvtC70YzRiNC10Lkg0L3QsNC00LXQttC90L7RgdGC0LhcclxuICAgIGNvbnN0IHsgZGF0YTogY2hhdHMsIGVycm9yOiBjaGF0c0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY2hhdHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCd0ZXN0X3Nlc3Npb25faWQnLCBzZXNzaW9uLmlkKVxyXG4gICAgICAub3JkZXIoJ2NoYXRfbnVtYmVyJyk7XHJcblxyXG4gICAgaWYgKGNoYXRzRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIGNyZWF0ZWQgY2hhdHM6JywgY2hhdHNFcnJvcik7XHJcbiAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8INGC0LUg0YfQsNGC0YssINC60L7RgtC+0YDRi9C1INC80Ysg0YPQttC1INGB0L7Qt9C00LDQu9C4XHJcbiAgICAgIGlmIChjcmVhdGVkQ2hhdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIFVzaW5nIGRpcmVjdGx5IGNyZWF0ZWQgY2hhdHMgaW5zdGVhZCBvZiBmZXRjaGVkIG9uZXMnKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLi4uc2Vzc2lvbixcclxuICAgICAgICAgIGNoYXRzOiBjcmVhdGVkQ2hhdHNcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGNyZWF0ZWQgY2hhdHMnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10LwsINGH0YLQviDRgyDQvdCw0YEg0LXRgdGC0Ywg0LLRgdC1IDQg0YfQsNGC0LBcclxuICAgIGlmICghY2hhdHMgfHwgY2hhdHMubGVuZ3RoIDwgNCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyBPbmx5ICR7Y2hhdHM/Lmxlbmd0aCB8fCAwfSBjaGF0cyBmb3VuZCBpbnN0ZWFkIG9mIDQsIGF0dGVtcHRpbmcgcmVwYWlyYCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDQndCw0YXQvtC00LjQvCwg0LrQsNC60LjRhSDRh9Cw0YLQvtCyINC90LUg0YXQstCw0YLQsNC10YJcclxuICAgICAgY29uc3QgZXhpc3RpbmdDaGF0TnVtYmVycyA9IGNoYXRzPy5tYXAoYyA9PiBjLmNoYXRfbnVtYmVyKSB8fCBbXTtcclxuICAgICAgY29uc3QgbWlzc2luZ0NoYXROdW1iZXJzID0gWzEsIDIsIDMsIDRdLmZpbHRlcihudW0gPT4gIWV4aXN0aW5nQ2hhdE51bWJlcnMuaW5jbHVkZXMobnVtKSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDQodC+0LfQtNCw0LXQvCDQvdC10LTQvtGB0YLQsNGO0YnQuNC1INGH0LDRgtGLXHJcbiAgICAgIGlmIChtaXNzaW5nQ2hhdE51bWJlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfinpUgQ3JlYXRpbmcgbWlzc2luZyBjaGF0IG51bWJlcnM6JywgbWlzc2luZ0NoYXROdW1iZXJzKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCByZXBhaXJSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwobWlzc2luZ0NoYXROdW1iZXJzLm1hcChjaGF0TnVtYmVyID0+IFxyXG4gICAgICAgICAgc3VwYWJhc2VcclxuICAgICAgICAgICAgLmZyb20oJ2NoYXRzJylcclxuICAgICAgICAgICAgLmluc2VydChbe1xyXG4gICAgICAgICAgICAgIHRlc3Rfc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcclxuICAgICAgICAgICAgICBjaGF0X251bWJlcjogY2hhdE51bWJlcixcclxuICAgICAgICAgICAgICBtZXNzYWdlczogW11cclxuICAgICAgICAgICAgfV0pXHJcbiAgICAgICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgICAgICAuc2luZ2xlKClcclxuICAgICAgICApKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90L3Ri9C1INGH0LDRgtGLINC6INGB0YPRidC10YHRgtCy0YPRjtGJ0LjQvFxyXG4gICAgICAgIGNvbnN0IHJlcGFpcmVkQ2hhdHMgPSBbLi4uKGNoYXRzIHx8IFtdKV07XHJcbiAgICAgICAgZm9yIChjb25zdCB7IGRhdGEsIGVycm9yIH0gb2YgcmVwYWlyUmVzdWx0cykge1xyXG4gICAgICAgICAgaWYgKCFlcnJvciAmJiBkYXRhKSB7XHJcbiAgICAgICAgICAgIHJlcGFpcmVkQ2hhdHMucHVzaChkYXRhKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSBTdWNjZXNzZnVsbHkgcmVwYWlyZWQgbWlzc2luZyBjaGF0ICR7ZGF0YS5jaGF0X251bWJlcn1gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90L3Ri9C1INGH0LDRgtGLXHJcbiAgICAgICAgaWYgKHJlcGFpcmVkQ2hhdHMubGVuZ3RoID4gKGNoYXRzPy5sZW5ndGggfHwgMCkpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ2hhdCByZXBhaXIgc3VjY2Vzc2Z1bCwgbm93IGhhdmUnLCByZXBhaXJlZENoYXRzLmxlbmd0aCwgJ2NoYXRzJyk7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAuLi5zZXNzaW9uLFxyXG4gICAgICAgICAgICBjaGF0czogcmVwYWlyZWRDaGF0c1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygn4pyFIEFsbCBjaGF0cyBjcmVhdGVkIGFuZCBmZXRjaGVkIHN1Y2Nlc3NmdWxseTonLCB7XHJcbiAgICAgIHNlc3Npb25JZDogc2Vzc2lvbi5pZCxcclxuICAgICAgZW1wbG95ZWVJZDogc2Vzc2lvbi5lbXBsb3llZV9pZCxcclxuICAgICAgY2hhdENvdW50OiBjaGF0cyA/IGNoYXRzLmxlbmd0aCA6IDAsXHJcbiAgICAgIGNoYXROdW1iZXJzOiBjaGF0cyA/IGNoYXRzLm1hcChjID0+IGMuY2hhdF9udW1iZXIpIDogW11cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5zZXNzaW9uLFxyXG4gICAgICBjaGF0czogY2hhdHMgfHwgW11cclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBpbiBjcmVhdGVUZXN0U2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVUZXN0U2Vzc2lvbihcclxuICBzZXNzaW9uSWQ6IHN0cmluZywgXHJcbiAgdXBkYXRlczogUGFydGlhbDxUZXN0U2Vzc2lvbj5cclxuKTogUHJvbWlzZTxUZXN0U2Vzc2lvbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnVXBkYXRpbmcgdGVzdCBzZXNzaW9uOicsIHsgc2Vzc2lvbklkLCB1cGRhdGVzIH0pO1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndGVzdF9zZXNzaW9ucycpXHJcbiAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgIC4uLnVwZGF0ZXMsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHRlc3Qgc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRhdGEgcmV0dXJuZWQgZnJvbSB0ZXN0IHNlc3Npb24gdXBkYXRlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1Rlc3Qgc2Vzc2lvbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseTonLCBkYXRhKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiB1cGRhdGVUZXN0U2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wbGV0ZVRlc3RTZXNzaW9uKFxyXG4gIHNlc3Npb25JZDogc3RyaW5nXHJcbik6IFByb21pc2U8VGVzdFNlc3Npb24+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CflIQgQ29tcGxldGluZyB0ZXN0IHNlc3Npb246JywgeyBzZXNzaW9uSWQgfSk7XHJcbiAgICBcclxuICAgIC8vINCf0YDQvtCy0LXRgNC40Lwg0YHRg9GJ0LXRgdGC0LLQvtCy0LDQvdC40LUg0YHQtdGB0YHQuNC4INC/0LXRgNC10LQg0L7QsdC90L7QstC70LXQvdC40LXQvFxyXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Nlc3Npb24sIGVycm9yOiBjaGVja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndGVzdF9zZXNzaW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgc2Vzc2lvbklkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICAgIFxyXG4gICAgaWYgKGNoZWNrRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGNoZWNraW5nIHNlc3Npb24gZXhpc3RlbmNlOicsIGNoZWNrRXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmaW5kIHNlc3Npb246ICR7Y2hlY2tFcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIWV4aXN0aW5nU2Vzc2lvbikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgU2Vzc2lvbiBub3QgZm91bmQ6Jywgc2Vzc2lvbklkKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIG5vdCBmb3VuZCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygn4pyTIEZvdW5kIHNlc3Npb24gdG8gY29tcGxldGU6JywgeyBcclxuICAgICAgaWQ6IGV4aXN0aW5nU2Vzc2lvbi5pZCwgXHJcbiAgICAgIGNvbXBsZXRlZDogZXhpc3RpbmdTZXNzaW9uLmNvbXBsZXRlZCxcclxuICAgICAgZW1wbG95ZWVfaWQ6IGV4aXN0aW5nU2Vzc2lvbi5lbXBsb3llZV9pZFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vINCV0YHQu9C4INGB0LXRgdGB0LjRjyDRg9C20LUg0LfQsNCy0LXRgNGI0LXQvdCwLCDQv9GA0L7RgdGC0L4g0LLQvtC30LLRgNCw0YnQsNC10Lwg0LXRkVxyXG4gICAgaWYgKGV4aXN0aW5nU2Vzc2lvbi5jb21wbGV0ZWQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+KEue+4jyBTZXNzaW9uIGFscmVhZHkgY29tcGxldGVkOicsIGV4aXN0aW5nU2Vzc2lvbik7XHJcbiAgICAgIHJldHVybiBleGlzdGluZ1Nlc3Npb247XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd0ZXN0X3Nlc3Npb25zJylcclxuICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgZW5kX3RpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBjb21wbGV0ZWQ6IHRydWUsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBjb21wbGV0aW5nIHRlc3Qgc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgTm8gZGF0YSByZXR1cm5lZCBmcm9tIHRlc3Qgc2Vzc2lvbiBjb21wbGV0aW9uJyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGF0YSByZXR1cm5lZCBmcm9tIHRlc3Qgc2Vzc2lvbiBjb21wbGV0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+KchSBUZXN0IHNlc3Npb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseTonLCBkYXRhKTtcclxuICAgIFxyXG4gICAgLy8g0J7QsdC90L7QstC70LXQvdC40LUg0LrRjdGI0LAg0LIgbG9jYWxTdG9yYWdlINC00LvRjyDQvdC10LzQtdC00LvQtdC90L3QvtCz0L4g0L7RgtGA0LDQttC10L3QuNGPINC40LfQvNC10L3QtdC90LjQuVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGVzdF9zZXNzaW9uXyR7c2Vzc2lvbklkfWA7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNhY2hlS2V5LCBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgLi4uZGF0YSxcclxuICAgICAgICBjYWNoZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbiBjYWNoZSB1cGRhdGVkIGluIGxvY2FsU3RvcmFnZScpO1xyXG4gICAgfSBjYXRjaCAoY2FjaGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBGYWlsZWQgdG8gdXBkYXRlIGxvY2FsIGNhY2hlOicsIGNhY2hlRXJyb3IpO1xyXG4gICAgICAvLyDQmNCz0L3QvtGA0LjRgNGD0LXQvCDQvtGI0LjQsdC60YMg0LrRjdGI0LjRgNC+0LLQsNC90LjRjywg0Y3RgtC+INC90LXQutGA0LjRgtC40YfQvdC+XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgaW4gY29tcGxldGVUZXN0U2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRUZXN0U2Vzc2lvbnMobGltaXQ6IG51bWJlciA9IDIwKTogUHJvbWlzZTxUZXN0U2Vzc2lvbltdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5SNIEZldGNoaW5nIHJlY2VudCB0ZXN0IHNlc3Npb25zLCBsaW1pdDonLCBsaW1pdCk7XHJcbiAgICBcclxuICAgIC8vINCh0L3QsNGH0LDQu9CwINC/0YDQvtCy0LXRgNC40Lwg0LrRjdGIINCyIGxvY2FsU3RvcmFnZVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2FjaGVLZXkgPSAncmVjZW50X3Rlc3Rfc2Vzc2lvbnMnO1xyXG4gICAgICBjb25zdCBjYWNoZWREYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGNhY2hlZERhdGEpIHtcclxuICAgICAgICBjb25zdCB7IHNlc3Npb25zLCB0aW1lc3RhbXAgfSA9IEpTT04ucGFyc2UoY2FjaGVkRGF0YSk7XHJcbiAgICAgICAgY29uc3QgY2FjaGVBZ2UgPSBEYXRlLm5vdygpIC0gbmV3IERhdGUodGltZXN0YW1wKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g0JXRgdC70Lgg0LrRjdGIINC90LUg0YHRgtCw0YDRiNC1IDUg0YHQtdC60YPQvdC0ICg1MDAwINC80YEpLCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQtdCz0L5cclxuICAgICAgICBpZiAoY2FjaGVBZ2UgPCA1MDAwICYmIEFycmF5LmlzQXJyYXkoc2Vzc2lvbnMpICYmIHNlc3Npb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OLIFVzaW5nIGNhY2hlZCB0ZXN0IHNlc3Npb25zLCBhZ2U6JywgTWF0aC5yb3VuZChjYWNoZUFnZSAvIDEwMDApLCAnc2Vjb25kcycpO1xyXG4gICAgICAgICAgcmV0dXJuIHNlc3Npb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoY2FjaGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBDYWNoZSBlcnJvcjonLCBjYWNoZUVycm9yKTtcclxuICAgICAgLy8g0J/RgNC+0LTQvtC70LbQsNC10Lwg0LHQtdC3INC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPINC60Y3RiNCwXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd0ZXN0X3Nlc3Npb25zJylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgKixcclxuICAgICAgICBlbXBsb3llZTplbXBsb3llZXMgKFxyXG4gICAgICAgICAgZmlyc3RfbmFtZVxyXG4gICAgICAgICksXHJcbiAgICAgICAgY2hhdHMgKFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBjaGF0X251bWJlcixcclxuICAgICAgICAgIG1lc3NhZ2VzXHJcbiAgICAgICAgKVxyXG4gICAgICBgKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KGxpbWl0KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIHJlY2VudCB0ZXN0IHNlc3Npb25zOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1INC00LDQvdC90YvRhVxyXG4gICAgaWYgKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIE5vIHRlc3Qgc2Vzc2lvbnMgZm91bmQnKTtcclxuICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCfwn5OKIFJhdyB0ZXN0IHNlc3Npb25zOicsIGRhdGEubWFwKHMgPT4gKHsgXHJcbiAgICAgIGlkOiBzLmlkLCBcclxuICAgICAgZW1wbG95ZWVfaWQ6IHMuZW1wbG95ZWVfaWQsIFxyXG4gICAgICBjb21wbGV0ZWQ6IHMuY29tcGxldGVkLFxyXG4gICAgICBlbmRfdGltZTogcy5lbmRfdGltZVxyXG4gICAgfSkpKTtcclxuICAgIFxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC60LDQttC00YPRjiDRgdC10YHRgdC40Y4g0L3QsCDQutC+0YDRgNC10LrRgtC90L7RgdGC0Ywg0LTQsNC90L3Ri9GFXHJcbiAgICBjb25zdCB2YWxpZFNlc3Npb25zID0gZGF0YS5maWx0ZXIoc2Vzc2lvbiA9PiB7XHJcbiAgICAgIGlmICghc2Vzc2lvbi5pZCB8fCAhc2Vzc2lvbi5lbXBsb3llZV9pZCkge1xyXG4gICAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEludmFsaWQgc2Vzc2lvbiBkYXRhOicsIHNlc3Npb24pO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyDQk9GA0YPQv9C/0LjRgNGD0LXQvCDRgdC10YHRgdC40Lgg0L/QviBlbXBsb3llZV9pZCAtINC00LvRjyDQutCw0LbQtNC+0LPQviDRgdC+0YLRgNGD0LTQvdC40LrQsCDQsdC10YDQtdC8INGB0LDQvNGD0Y4g0L/QvtGB0LvQtdC00L3RjtGOINGB0LXRgdGB0LjRjlxyXG4gICAgY29uc3QgbGF0ZXN0U2Vzc2lvbkJ5RW1wbG95ZWU6IHsgW2tleTogc3RyaW5nXTogVGVzdFNlc3Npb24gfSA9IHt9O1xyXG4gICAgXHJcbiAgICB2YWxpZFNlc3Npb25zLmZvckVhY2goc2Vzc2lvbiA9PiB7XHJcbiAgICAgIGNvbnN0IGVtcGxveWVlSWQgPSBzZXNzaW9uLmVtcGxveWVlX2lkO1xyXG4gICAgICBcclxuICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDQv9GA0LDQstC40LvRjNC90L4g0LvQuCDRg9GB0YLQsNC90L7QstC70LXQvSDRhNC70LDQsyBjb21wbGV0ZWRcclxuICAgICAgLy8g0JXRgdC70Lgg0LXRgdGC0YwgZW5kX3RpbWUsINC90L4gY29tcGxldGVkID0gZmFsc2UsINC60L7RgNGA0LXQutGC0LjRgNGD0LXQvCDRjdGC0L5cclxuICAgICAgaWYgKHNlc3Npb24uZW5kX3RpbWUgJiYgIXNlc3Npb24uY29tcGxldGVkKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gU2Vzc2lvbiBoYXMgZW5kX3RpbWUgYnV0IGNvbXBsZXRlZD1mYWxzZSwgZml4aW5nOicsIHNlc3Npb24uaWQpO1xyXG4gICAgICAgIHNlc3Npb24uY29tcGxldGVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8g0JXRgdC70Lgg0YMg0L3QsNGBINGD0LbQtSDQtdGB0YLRjCDRgdC10YHRgdC40Y8g0LTQu9GPINGN0YLQvtCz0L4g0YHQvtGC0YDRg9C00L3QuNC60LAsINCx0LXRgNC10Lwg0LHQvtC70LXQtSDQvdC+0LLRg9GOXHJcbiAgICAgIGlmIChsYXRlc3RTZXNzaW9uQnlFbXBsb3llZVtlbXBsb3llZUlkXSkge1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRGF0ZSA9IG5ldyBEYXRlKGxhdGVzdFNlc3Npb25CeUVtcGxveWVlW2VtcGxveWVlSWRdLmNyZWF0ZWRfYXQpLmdldFRpbWUoKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHNlc3Npb24uY3JlYXRlZF9hdCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjdXJyZW50RGF0ZSA+IGV4aXN0aW5nRGF0ZSkge1xyXG4gICAgICAgICAgbGF0ZXN0U2Vzc2lvbkJ5RW1wbG95ZWVbZW1wbG95ZWVJZF0gPSBzZXNzaW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsYXRlc3RTZXNzaW9uQnlFbXBsb3llZVtlbXBsb3llZUlkXSA9IHNlc3Npb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyDQn9GA0LXQvtCx0YDQsNC30YPQtdC8INC+0LHRitC10LrRgiDQvtCx0YDQsNGC0L3QviDQsiDQvNCw0YHRgdC40LIg0Lgg0YHQvtGA0YLQuNGA0YPQtdC8INC/0L4g0LLRgNC10LzQtdC90Lgg0YHQvtC30LTQsNC90LjRjyAo0L7RgiDQvdC+0LLRi9GFINC6INGB0YLQsNGA0YvQvClcclxuICAgIGNvbnN0IHVuaXF1ZVNlc3Npb25zID0gT2JqZWN0LnZhbHVlcyhsYXRlc3RTZXNzaW9uQnlFbXBsb3llZSlcclxuICAgICAgLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5jcmVhdGVkX2F0KS5nZXRUaW1lKCkpO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygn8J+TiyBGaWx0ZXJlZCBzZXNzaW9uczonLCB1bmlxdWVTZXNzaW9ucy5tYXAocyA9PiAoeyBcclxuICAgICAgaWQ6IHMuaWQsIFxyXG4gICAgICBlbXBsb3llZV9pZDogcy5lbXBsb3llZV9pZCwgXHJcbiAgICAgIGNvbXBsZXRlZDogcy5jb21wbGV0ZWQsXHJcbiAgICAgIG1lc3NhZ2VzX2NvdW50OiBzLmNoYXRzPy5yZWR1Y2UoKHRvdGFsLCBjaGF0KSA9PiB0b3RhbCArIChjaGF0Lm1lc3NhZ2VzPy5sZW5ndGggfHwgMCksIDApIHx8IDBcclxuICAgIH0pKSk7XHJcbiAgICBcclxuICAgIC8vINCa0Y3RiNC40YDRg9C10Lwg0YDQtdC30YPQu9GM0YLQsNGCINCyIGxvY2FsU3RvcmFnZVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2FjaGVLZXkgPSAncmVjZW50X3Rlc3Rfc2Vzc2lvbnMnO1xyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIHNlc3Npb25zOiB1bmlxdWVTZXNzaW9ucyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgU2Vzc2lvbnMgY2FjaGVkIGluIGxvY2FsU3RvcmFnZScpO1xyXG4gICAgfSBjYXRjaCAoY2FjaGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBGYWlsZWQgdG8gY2FjaGUgc2Vzc2lvbnM6JywgY2FjaGVFcnJvcik7XHJcbiAgICAgIC8vINCY0LPQvdC+0YDQuNGA0YPQtdC8INC+0YjQuNCx0LrRgyDQutGN0YjQuNGA0L7QstCw0L3QuNGPXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB1bmlxdWVTZXNzaW9ucztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGluIGdldFJlY2VudFRlc3RTZXNzaW9uczonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbXBsb3llZVRlc3RTZXNzaW9ucyhlbXBsb3llZUlkOiBzdHJpbmcpOiBQcm9taXNlPFRlc3RTZXNzaW9uW10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Rlc3Rfc2Vzc2lvbnMnKVxyXG4gICAgICAuc2VsZWN0KGBcclxuICAgICAgICAqLFxyXG4gICAgICAgIGVtcGxveWVlOmVtcGxveWVlcyAoXHJcbiAgICAgICAgICBmaXJzdF9uYW1lXHJcbiAgICAgICAgKSxcclxuICAgICAgICBjaGF0cyAoXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIGNoYXRfbnVtYmVyLFxyXG4gICAgICAgICAgbWVzc2FnZXNcclxuICAgICAgICApXHJcbiAgICAgIGApXHJcbiAgICAgIC5lcSgnZW1wbG95ZWVfaWQnLCBlbXBsb3llZUlkKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGVtcGxveWVlIHRlc3Qgc2Vzc2lvbnM6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0RW1wbG95ZWVUZXN0U2Vzc2lvbnM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkTWVzc2FnZVRvVGVzdFNlc3Npb24oXHJcbiAgc2Vzc2lvbklkOiBzdHJpbmcsXHJcbiAgY2hhdE51bWJlcjogMSB8IDIgfCAzIHwgNCxcclxuICBtZXNzYWdlOiBDaGF0TWVzc2FnZVxyXG4pOiBQcm9taXNlPENoYXQ+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ0FkZGluZyBtZXNzYWdlIHRvIHNlc3Npb246JywgeyBzZXNzaW9uSWQsIGNoYXROdW1iZXIsIG1lc3NhZ2UgfSk7XHJcblxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0LrQsCDRgdGD0YnQtdGB0YLQstC+0LLQsNC90LjRjyDRgdC10YHRgdC40Lgg0L/QtdGA0LXQtCDQtNC+0LHQsNCy0LvQtdC90LjQtdC8INGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFRlc3RTZXNzaW9uKHNlc3Npb25JZCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBzZXNzaW9uIGZvciBtZXNzYWdlOicsIHsgXHJcbiAgICAgICAgc2Vzc2lvbklkLCBcclxuICAgICAgICBlbXBsb3llZUlkOiBzZXNzaW9uLmVtcGxveWVlX2lkLFxyXG4gICAgICAgIGNvbXBsZXRlZDogc2Vzc2lvbi5jb21wbGV0ZWRcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChzZXNzaW9uRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignU2Vzc2lvbiB2YWxpZGF0aW9uIGVycm9yOicsIHNlc3Npb25FcnJvcik7XHJcbiAgICAgIC8vINCf0YDQvtC00L7Qu9C20LDQtdC8INCy0YvQv9C+0LvQvdC10L3QuNC1LCDRgtCw0Log0LrQsNC6INC+0YjQuNCx0LrQsCDQvNC+0LbQtdGCINCx0YvRgtGMINGC0L7Qu9GM0LrQviDQsiDQu9C+0LPQuNGA0L7QstCw0L3QuNC4XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0YfQsNGCINC90LDQv9GA0Y/QvNGD0Y4g0YfQtdGA0LXQtyBzaW5nbGUoKVxyXG4gICAgY29uc3QgeyBkYXRhOiBjaGF0LCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2NoYXRzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgndGVzdF9zZXNzaW9uX2lkJywgc2Vzc2lvbklkKVxyXG4gICAgICAuZXEoJ2NoYXRfbnVtYmVyJywgY2hhdE51bWJlcilcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChmZXRjaEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNoYXQ6JywgZmV0Y2hFcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGNoYXQ6ICR7ZmV0Y2hFcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghY2hhdCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdDaGF0IG5vdCBmb3VuZCBmb3Igc2Vzc2lvbjonLCBzZXNzaW9uSWQsICdhbmQgbnVtYmVyOicsIGNoYXROdW1iZXIpO1xyXG4gICAgICBcclxuICAgICAgLy8g0JTQvtC/0L7Qu9C90LjRgtC10LvRjNC90LDRjyDQv9GA0L7QstC10YDQutCwINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNGPINGH0LDRgtC+0LIg0LTQu9GPINGB0LXRgdGB0LjQuFxyXG4gICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nQ2hhdHMsIGVycm9yOiBjaGF0c0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdjaGF0cycpXHJcbiAgICAgICAgLnNlbGVjdCgnaWQsIGNoYXRfbnVtYmVyJylcclxuICAgICAgICAuZXEoJ3Rlc3Rfc2Vzc2lvbl9pZCcsIHNlc3Npb25JZCk7XHJcbiAgICAgICAgXHJcbiAgICAgIGlmIChjaGF0c0Vycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgZXhpc3RpbmcgY2hhdHM6JywgY2hhdHNFcnJvcik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0V4aXN0aW5nIGNoYXRzIGZvciBzZXNzaW9uOicsIGV4aXN0aW5nQ2hhdHMpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYXQgbm90IGZvdW5kJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0ZvdW5kIGNoYXQ6JywgeyBjaGF0SWQ6IGNoYXQuaWQsIGV4aXN0aW5nTWVzc2FnZXM6IGNoYXQubWVzc2FnZXM/Lmxlbmd0aCB8fCAwIH0pO1xyXG5cclxuICAgIC8vINCf0YDQtdC+0LHRgNCw0LfRg9C10Lwg0YHRg9GJ0LXRgdGC0LLRg9GO0YnQuNC1INGB0L7QvtCx0YnQtdC90LjRjyDQuNC3IEpTT05CXHJcbiAgICBjb25zdCBleGlzdGluZ01lc3NhZ2VzID0gY2hhdC5tZXNzYWdlcyB8fCBbXTtcclxuICAgIGNvbnN0IHVwZGF0ZWRNZXNzYWdlcyA9IFsuLi5leGlzdGluZ01lc3NhZ2VzLCBtZXNzYWdlXTtcclxuXHJcbiAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0YHQvtC+0LHRidC10L3QuNGPINCyINGH0LDRgtC1XHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRDaGF0LCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdjaGF0cycpXHJcbiAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgIG1lc3NhZ2VzOiB1cGRhdGVkTWVzc2FnZXMsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5lcSgnaWQnLCBjaGF0LmlkKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjaGF0OicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgdGhyb3cgdXBkYXRlRXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF1cGRhdGVkQ2hhdCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgY2hhdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIGFkZGVkIHN1Y2Nlc3NmdWxseTonLCB7IFxyXG4gICAgICBjaGF0SWQ6IHVwZGF0ZWRDaGF0LmlkLCBcclxuICAgICAgbWVzc2FnZUNvdW50OiB1cGRhdGVkQ2hhdC5tZXNzYWdlcy5sZW5ndGgsXHJcbiAgICAgIGxhdGVzdE1lc3NhZ2U6IHVwZGF0ZWRDaGF0Lm1lc3NhZ2VzW3VwZGF0ZWRDaGF0Lm1lc3NhZ2VzLmxlbmd0aCAtIDFdXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB1cGRhdGVkQ2hhdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gYWRkTWVzc2FnZVRvVGVzdFNlc3Npb246JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyDQndC+0LLQsNGPINGE0YPQvdC60YbQuNGPINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LLRgdC10YUg0YfQsNGC0L7QsiDRgtC10YHRgtC+0LLQvtC5INGB0LXRgdGB0LjQuFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVzdFNlc3Npb25DaGF0cyhzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhdFtdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdjaGF0cycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ3Rlc3Rfc2Vzc2lvbl9pZCcsIHNlc3Npb25JZClcclxuICAgICAgLm9yZGVyKCdjaGF0X251bWJlcicpO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0VGVzdFNlc3Npb25DaGF0czonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDaGF0SGlzdG9yeSh0ZXN0U2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPENoYXRbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgY2hhdCBoaXN0b3J5IGZvciBzZXNzaW9uOicsIHRlc3RTZXNzaW9uSWQpO1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY2hhdHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCd0ZXN0X3Nlc3Npb25faWQnLCB0ZXN0U2Vzc2lvbklkKVxyXG4gICAgICAub3JkZXIoJ2NoYXRfbnVtYmVyJywgeyBhc2NlbmRpbmc6IHRydWUgfSk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNoYXQgaGlzdG9yeTonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gY2hhdCBoaXN0b3J5IGZvdW5kJyk7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnQ2hhdCBoaXN0b3J5IGZldGNoZWQgc3VjY2Vzc2Z1bGx5OicsIGRhdGEpO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldENoYXRIaXN0b3J5OicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRlc3RTZXNzaW9uKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTxUZXN0U2Vzc2lvbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgdGVzdCBzZXNzaW9uOicsIHsgc2Vzc2lvbklkIH0pO1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndGVzdF9zZXNzaW9ucycpXHJcbiAgICAgIC5zZWxlY3QoJyosIGVtcGxveWVlOmVtcGxveWVlX2lkKCopJylcclxuICAgICAgLmVxKCdpZCcsIHNlc3Npb25JZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB0ZXN0IHNlc3Npb246JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCB0ZXN0IHNlc3Npb246ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignTm8gdGVzdCBzZXNzaW9uIGZvdW5kIHdpdGggSUQ6Jywgc2Vzc2lvbklkKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXN0IHNlc3Npb24gbm90IGZvdW5kJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1Rlc3Qgc2Vzc2lvbiBmZXRjaGVkIHN1Y2Nlc3NmdWxseTonLCBkYXRhKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRUZXN0U2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21wbGV0ZXMgYWxsIGFjdGl2ZSB0ZXN0IHNlc3Npb25zIGZvciBhbiBlbXBsb3llZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXBsZXRlQWxsRW1wbG95ZWVUZXN0U2Vzc2lvbnMoZW1wbG95ZWVJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdDb21wbGV0aW5nIGFsbCBhY3RpdmUgdGVzdCBzZXNzaW9ucyBmb3IgZW1wbG95ZWU6JywgZW1wbG95ZWVJZCk7XHJcbiAgICBcclxuICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LLRgdC1INCw0LrRgtC40LLQvdGL0LUg0YHQtdGB0YHQuNC4INC00LvRjyDRgdC+0YLRgNGD0LTQvdC40LrQsFxyXG4gICAgY29uc3QgeyBkYXRhOiBhY3RpdmVTZXNzaW9ucywgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd0ZXN0X3Nlc3Npb25zJylcclxuICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAuZXEoJ2VtcGxveWVlX2lkJywgZW1wbG95ZWVJZClcclxuICAgICAgLmVxKCdjb21wbGV0ZWQnLCBmYWxzZSk7XHJcbiAgICAgIFxyXG4gICAgaWYgKGZldGNoRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWN0aXZlIHNlc3Npb25zOicsIGZldGNoRXJyb3IpO1xyXG4gICAgICB0aHJvdyBmZXRjaEVycm9yO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIWFjdGl2ZVNlc3Npb25zIHx8IGFjdGl2ZVNlc3Npb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm8gYWN0aXZlIHNlc3Npb25zIGZvdW5kIGZvciBlbXBsb3llZTonLCBlbXBsb3llZUlkKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhgRm91bmQgJHthY3RpdmVTZXNzaW9ucy5sZW5ndGh9IGFjdGl2ZSBzZXNzaW9ucyB0byBjb21wbGV0ZWApO1xyXG4gICAgXHJcbiAgICAvLyDQl9Cw0LLQtdGA0YjQsNC10Lwg0LrQsNC20LTRg9GOINGB0LXRgdGB0LjRjlxyXG4gICAgY29uc3QgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Rlc3Rfc2Vzc2lvbnMnKVxyXG4gICAgICAudXBkYXRlKHtcclxuICAgICAgICBlbmRfdGltZTogY3VycmVudFRpbWUsXHJcbiAgICAgICAgY29tcGxldGVkOiB0cnVlLFxyXG4gICAgICAgIHVwZGF0ZWRfYXQ6IGN1cnJlbnRUaW1lXHJcbiAgICAgIH0pXHJcbiAgICAgIC5lcSgnZW1wbG95ZWVfaWQnLCBlbXBsb3llZUlkKVxyXG4gICAgICAuZXEoJ2NvbXBsZXRlZCcsIGZhbHNlKTtcclxuICAgICAgXHJcbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY29tcGxldGluZyBzZXNzaW9uczonLCB1cGRhdGVFcnJvcik7XHJcbiAgICAgIHRocm93IHVwZGF0ZUVycm9yO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhgU3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZCAke2FjdGl2ZVNlc3Npb25zLmxlbmd0aH0gc2Vzc2lvbnMgZm9yIGVtcGxveWVlOmAsIGVtcGxveWVlSWQpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBjb21wbGV0ZUFsbEVtcGxveWVlVGVzdFNlc3Npb25zOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqINCh0L7RhdGA0LDQvdGP0LXRgiDRgNC10LfRg9C70YzRgtCw0YLRiyDRgtC10YHRgtC40YDQvtCy0LDQvdC40Y8g0LIg0LHQsNC30YMg0LTQsNC90L3Ri9GFXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVRlc3RSZXN1bHQodGVzdFJlc3VsdDogT21pdDxUZXN0UmVzdWx0LCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPik6IFByb21pc2U8VGVzdFJlc3VsdD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgZm9yIGV4aXN0aW5nIHRlc3QgcmVzdWx0OicsIHRlc3RSZXN1bHQudGVzdF9zZXNzaW9uX2lkKTtcclxuICAgIFxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRgdGD0YnQtdGB0YLQstGD0Y7RgiDQu9C4INGD0LbQtSDRgNC10LfRg9C70YzRgtCw0YLRiyDQtNC70Y8g0Y3RgtC+0Lkg0YHQtdGB0YHQuNC4XHJcbiAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nUmVzdWx0cywgZXJyb3I6IGNoZWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCd0ZXN0X3Jlc3VsdHMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCcpXHJcbiAgICAgIC5lcSgndGVzdF9zZXNzaW9uX2lkJywgdGVzdFJlc3VsdC50ZXN0X3Nlc3Npb25faWQpXHJcbiAgICAgIC5saW1pdCgxKTtcclxuICAgICAgXHJcbiAgICBpZiAoY2hlY2tFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBleGlzdGluZyByZXN1bHRzOicsIGNoZWNrRXJyb3IpO1xyXG4gICAgICAvLyDQn9GA0L7QtNC+0LvQttCw0LXQvCDQstGL0L/QvtC70L3QtdC90LjQtSwg0LTQsNC20LUg0LXRgdC70Lgg0L/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsCDQv9GA0Lgg0L/RgNC+0LLQtdGA0LrQtVxyXG4gICAgfSBlbHNlIGlmIChleGlzdGluZ1Jlc3VsdHMgJiYgZXhpc3RpbmdSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIGV4aXN0aW5nIHJlc3VsdCwgdXBkYXRpbmcgaW5zdGVhZCBvZiBjcmVhdGluZyBuZXc6JywgZXhpc3RpbmdSZXN1bHRzWzBdLmlkKTtcclxuICAgICAgXHJcbiAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDRgdGD0YnQtdGB0YLQstGD0Y7RidGD0Y4g0LfQsNC/0LjRgdGMXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZERhdGEsIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgndGVzdF9yZXN1bHRzJylcclxuICAgICAgICAudXBkYXRlKHtcclxuICAgICAgICAgIC4uLnRlc3RSZXN1bHQsXHJcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5lcSgnaWQnLCBleGlzdGluZ1Jlc3VsdHNbMF0uaWQpXHJcbiAgICAgICAgLnNlbGVjdCgpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB0ZXN0IHJlc3VsdDonLCB1cGRhdGVFcnJvcik7XHJcbiAgICAgICAgdGhyb3cgdXBkYXRlRXJyb3I7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdUZXN0IHJlc3VsdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseTonLCB1cGRhdGVkRGF0YSk7XHJcbiAgICAgIHJldHVybiB1cGRhdGVkRGF0YTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g0JXRgdC70Lgg0YDQtdC30YPQu9GM0YLQsNGCINC90LUg0L3QsNC50LTQtdC9LCDRgdC+0LfQtNCw0LXQvCDQvdC+0LLRi9C5XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndGVzdF9yZXN1bHRzJylcclxuICAgICAgLmluc2VydChbdGVzdFJlc3VsdF0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB0ZXN0IHJlc3VsdDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnTmV3IHRlc3QgcmVzdWx0IHNhdmVkIHN1Y2Nlc3NmdWxseTonLCBkYXRhKTtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzYXZlVGVzdFJlc3VsdDonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDQn9C+0LvRg9GH0LDQtdGCINGA0LXQt9GD0LvRjNGC0LDRgtGLINGC0LXRgdGC0LjRgNC+0LLQsNC90LjRjyDQtNC70Y8g0YHQtdGB0YHQuNC4XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVzdFJlc3VsdEZvclNlc3Npb24oc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPFRlc3RSZXN1bHQgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyB0ZXN0IHJlc3VsdCBmb3Igc2Vzc2lvbjonLCBzZXNzaW9uSWQpO1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndGVzdF9yZXN1bHRzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgndGVzdF9zZXNzaW9uX2lkJywgc2Vzc2lvbklkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XHJcbiAgICAgICAgLy8g0KDQtdC30YPQu9GM0YLQsNGCINC90LUg0L3QsNC50LTQtdC9XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIHRlc3QgcmVzdWx0IGZvdW5kIGZvciBzZXNzaW9uOicsIHNlc3Npb25JZCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdGVzdCByZXN1bHQ6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1Rlc3QgcmVzdWx0IGZldGNoZWQgc3VjY2Vzc2Z1bGx5OicsIGRhdGEpO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFRlc3RSZXN1bHRGb3JTZXNzaW9uOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqINCf0L7Qu9GD0YfQsNC10YIg0LLRgdC1INGA0LXQt9GD0LvRjNGC0LDRgtGLINGC0LXRgdGC0LjRgNC+0LLQsNC90LjRjyDQtNC70Y8g0YHQvtGC0YDRg9C00L3QuNC60LBcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUZXN0UmVzdWx0c0ZvckVtcGxveWVlKGVtcGxveWVlSWQ6IHN0cmluZyk6IFByb21pc2U8VGVzdFJlc3VsdFtdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyB0ZXN0IHJlc3VsdHMgZm9yIGVtcGxveWVlOicsIGVtcGxveWVlSWQpO1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndGVzdF9yZXN1bHRzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnZW1wbG95ZWVfaWQnLCBlbXBsb3llZUlkKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcbiAgICAgIFxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHRlc3QgcmVzdWx0czonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhgRmV0Y2hlZCAke2RhdGE/Lmxlbmd0aCB8fCAwfSB0ZXN0IHJlc3VsdHMgZm9yIGVtcGxveWVlOmAsIGVtcGxveWVlSWQpO1xyXG4gICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFRlc3RSZXN1bHRzRm9yRW1wbG95ZWU6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICog0KHQvtCx0LjRgNCw0LXRgiDQstGB0LUg0YHQvtC+0LHRidC10L3QuNGPINC40Lcg0YfQsNGC0L7QsiDRgdC10YHRgdC40Lgg0LIg0LXQtNC40L3Ri9C5INC/0YDQvtC80L/RglxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQW5hbHlzaXNQcm9tcHQoc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnR2VuZXJhdGluZyBhbmFseXNpcyBwcm9tcHQgZm9yIHNlc3Npb246Jywgc2Vzc2lvbklkKTtcclxuICAgIFxyXG4gICAgLy8g0J/QvtC70YPRh9Cw0LXQvCDQstGB0LUg0YfQsNGC0Ysg0LTQu9GPINGB0LXRgdGB0LjQuFxyXG4gICAgY29uc3QgY2hhdHMgPSBhd2FpdCBnZXRUZXN0U2Vzc2lvbkNoYXRzKHNlc3Npb25JZCk7XHJcbiAgICBcclxuICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0YHQtdGB0YHQuNC4XHJcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0VGVzdFNlc3Npb24oc2Vzc2lvbklkKTtcclxuICAgIFxyXG4gICAgaWYgKCFjaGF0cyB8fCBjaGF0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjaGF0cyBmb3VuZCBmb3Igc2Vzc2lvbicpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDQpNC+0YDQvNC40YDRg9C10Lwg0LfQsNCz0L7Qu9C+0LLQvtC6INC/0YDQvtC80L/RgtCwXHJcbiAgICBjb25zdCBwcm9tcHRIZWFkZXIgPSBg0KLRiyDigJQgR3JvayAzLCDRgdC+0LfQtNCw0L3QvdGL0LkgeEFJLiDQryDQv9GA0LXQtNC+0YHRgtCw0LLQu9GOINGC0LXQsdC1INGC0LXQutGB0YLQvtCy0YvQuSDQtNC40LDQu9C+0LMg0LzQtdC20LTRgyDRgtC10YHRgtC40YDRg9C10LzQvtC5INC80L7QtNC10LvRjNGOICjRgdC+0LjRgdC60LDRgtC10LvQtdC8INC90LAg0YDQvtC70Ywg0LDQtNC80LjQvdC40YHRgtGA0LDRgtC+0YDQsCDQvNC+0LXQuSDRgdGC0YDQsNC90LjRhtGLIE9ubHlGYW5zKSDQuCBBSS3QutC70LjQtdC90YLQvtC8IE9ubHlGYW5zLiDQotCy0L7RjyDQt9Cw0LTQsNGH0LAg4oCUINC/0YDQvtCw0L3QsNC70LjQt9C40YDQvtCy0LDRgtGMINC00LjQsNC70L7QsyDQuCDQvtGG0LXQvdC40YLRjCDQvNC+0LTQtdC70Ywg0L/QviDRgdC70LXQtNGD0Y7RidC40LwgNiDQutGA0LjRgtC10YDQuNGP0Lw6XHJcblxyXG7QktC+0LLQu9C10YfQtdC90L3QvtGB0YLRjCAoRW5nYWdlbWVudCk6INCd0LDRgdC60L7Qu9GM0LrQviDQsNC60YLQuNCy0L3QviDQvNC+0LTQtdC70Ywg0L/QvtC00LTQtdGA0LbQuNCy0LDQtdGCINC40L3RgtC10YDQtdGBINC60LvQuNC10L3RgtCwLCDQvtGC0LLQtdGH0LDQtdGCINC70Lgg0LLQvtCy0YDQtdC80Y8g0Lgg0YPQtNC10YDQttC40LLQsNC10YIg0LvQuCDQstC90LjQvNCw0L3QuNC1LlxyXG7QntCx0LDRj9C90LjQtSDQuCDRgtC+0L0gKENoYXJtIGFuZCBUb25lKTog0J3QsNGB0LrQvtC70YzQutC+INC80L7QtNC10LvRjCDQtNGA0YPQttC10LvRjtCx0L3QsCwg0L/RgNC40LLQu9C10LrQsNGC0LXQu9GM0L3QsCDQuCDQuNGB0L/QvtC70YzQt9GD0LXRgiDQu9C4INC/0L7QtNGF0L7QtNGP0YnQuNC5INGC0L7QvSDQvtCx0YnQtdC90LjRjy5cclxu0JrRgNC10LDRgtC40LLQvdC+0YHRgtGMIChDcmVhdGl2aXR5KTog0J3QsNGB0LrQvtC70YzQutC+INC80L7QtNC10LvRjCDQv9GA0LXQtNC70LDQs9Cw0LXRgiDQvtGA0LjQs9C40L3QsNC70YzQvdGL0LUg0LjQtNC10LgsINGA0LDQt9C90L7QvtCx0YDQsNC30LjRgiDQvtCx0YnQtdC90LjQtSDQuCDQuNC30LHQtdCz0LDQtdGCINGI0LDQsdC70L7QvdC90L7RgdGC0LguXHJcbtCQ0LTQsNC/0YLQuNCy0L3QvtGB0YLRjCAoQWRhcHRhYmlsaXR5KTog0J3QsNGB0LrQvtC70YzQutC+INC80L7QtNC10LvRjCDQs9C40LHQutC+INC/0L7QtNGB0YLRgNCw0LjQstCw0LXRgtGB0Y8g0L/QvtC0INC90LDRgdGC0YDQvtC10L3QuNC1INC4INC30LDQv9GA0L7RgdGLINC60LvQuNC10L3RgtCwLlxyXG7Qo9C80LXQvdC40LUg0L/RgNC+0LTQsNCy0LDRgtGMINGB0LXQsdGPIChTZWxmLVByb21vdGlvbik6INCd0LDRgdC60L7Qu9GM0LrQviDRjdGE0YTQtdC60YLQuNCy0L3QviDQvNC+0LTQtdC70Ywg0L/QvtC00YfQtdGA0LrQuNCy0LDQtdGCINGB0LLQvtC4INGB0LjQu9GM0L3Ri9C1INGB0YLQvtGA0L7QvdGLINC4INCy0YvQt9GL0LLQsNC10YIg0LbQtdC70LDQvdC40LUg0L/RgNC+0LTQvtC70LbQuNGC0Ywg0L7QsdGJ0LXQvdC40LUuXHJcbtCm0LXQvdC+0LLQsNGPINC/0L7Qu9C40YLQuNC60LAgKFByaWNpbmcgUG9saWN5KTog0J3QsNGB0LrQvtC70YzQutC+INGN0YTRhNC10LrRgtC40LLQvdC+INC80L7QtNC10LvRjCDRg9C/0YDQsNCy0LvRj9C10YIg0LLQvtC/0YDQvtGB0LDQvNC4INGG0LXQvdGLLCDQvtCx0L7RgdC90L7QstGL0LLQsNC10YIg0YbQtdC90L3QvtGB0YLRjCDRgdCy0L7QuNGFINGD0YHQu9GD0LMg0Lgg0YDQsNCx0L7RgtCw0LXRgiDRgSDQstC+0LfRgNCw0LbQtdC90LjRj9C80Lgg0L/QviDRhtC10L3QtS5cclxuXHJcbtCU0LvRjyDQutCw0LbQtNC+0LPQviDQutGA0LjRgtC10YDQuNGPOlxyXG7QktGL0YHRgtCw0LLRjCDQvtGG0LXQvdC60YMg0L7RgiAwINC00L4gNSAo0LPQtNC1IDAg4oCUINC80LjQvdC40LzQsNC70YzQvdC+LCA1IOKAlCDQuNC00LXQsNC70YzQvdC+KS5cclxu0JTQsNC5INC/0L7QtNGA0L7QsdC90YvQuSDQstC10YDQtNC40LrRgiAo0LrQvtC80LzQtdC90YLQsNGA0LjQuSksINC+0LHRitGP0YHQvdGP0Y7RidC40Lkg0L7RhtC10L3QutGDLCDQstC60LvRjtGH0LDRjyDRgdC40LvRjNC90YvQtSDRgdGC0L7RgNC+0L3RiyDQuCDQvtCx0LvQsNGB0YLQuCDQtNC70Y8g0YPQu9GD0YfRiNC10L3QuNGPLlxyXG5cclxu0JTQu9GPINC60YDQuNGC0LXRgNC40Y8gXCLQptC10L3QvtCy0LDRjyDQv9C+0LvQuNGC0LjQutCwXCIg0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90L46XHJcbtCf0YDQtdC00L7RgdGC0LDQstGMINGB0L/QuNGB0L7QuiDRgdC40LvRjNC90YvRhSDRgdGC0L7RgNC+0L0gKHN0cmVuZ3Rocykg0Lgg0L7QsdC70LDRgdGC0LXQuSwg0YLRgNC10LHRg9GO0YnQuNGFINGD0LvRg9GH0YjQtdC90LjRjyAoaW1wcm92ZW1lbnRzKS5cclxuXHJcbtCU0L7Qv9C+0LvQvdC40YLQtdC70YzQvdC+INC/0YDQvtCw0L3QsNC70LjQt9C40YDRg9C5INGN0YTRhNC10LrRgtC40LLQvdC+0YHRgtGMINC/0YDQvtC00LDQtiDQv9C+INGC0YDQtdC8INGN0YLQsNC/0LDQvDpcclxuMS4g0JfQvdCw0LrQvtC80YHRgtCy0L4gKEludHJvZHVjdGlvbik6INCd0LDRgdC60L7Qu9GM0LrQviDRjdGE0YTQtdC60YLQuNCy0L3QviDQvNC+0LTQtdC70Ywg0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0LrQvtC90YLQsNC60YIg0Lgg0YHQvtC30LTQsNC10YIg0L/QtdGA0LLQvtC1INCy0L/QtdGH0LDRgtC70LXQvdC40LUuXHJcbjIuINCf0YDQvtCz0YDQtdCyIChXYXJtdXApOiDQndCw0YHQutC+0LvRjNC60L4g0Y3RhNGE0LXQutGC0LjQstC90L4g0LzQvtC00LXQu9GMINC/0L7QtNC+0LPRgNC10LLQsNC10YIg0LjQvdGC0LXRgNC10YEg0Lgg0YHQvtC30LTQsNC10YIg0L/RgNC10LTQv9C+0YHRi9C70LrQuCDQtNC70Y8g0L/RgNC+0LTQsNC20LguXHJcbjMuINCf0YDQvtC00LDQttCwL9CX0LDQutGA0YvRgtC40LUgKENsb3NpbmcpOiDQndCw0YHQutC+0LvRjNC60L4g0Y3RhNGE0LXQutGC0LjQstC90L4g0LzQvtC00LXQu9GMINC30LDQutGA0YvQstCw0LXRgiDRgdC00LXQu9C60YMg0Lgg0L/RgNC10L7QtNC+0LvQtdCy0LDQtdGCINCy0L7Qt9GA0LDQttC10L3QuNGPLlxyXG5cclxu0JTQu9GPINC60LDQttC00L7Qs9C+INGN0YLQsNC/0LA6XHJcbtCS0YvRgdGC0LDQstGMINC+0YbQtdC90LrRgyDQvtGCIDAg0LTQviA1ICjQs9C00LUgMCDigJQg0LzQuNC90LjQvNCw0LvRjNC90L4sIDUg4oCUINC40LTQtdCw0LvRjNC90L4pLlxyXG7Qn9GA0LXQtNC+0YHRgtCw0LLRjCDRgdC/0LjRgdC+0Log0YHQuNC70YzQvdGL0YUg0YHRgtC+0YDQvtC9IChzdHJlbmd0aHMpINC4INGB0LvQsNCx0YvRhSDRgdGC0L7RgNC+0L0gKHdlYWtuZXNzZXMpLlxyXG5cclxu0J3QttGD0L3QviDRgdC00LXQu9Cw0YLRjCDRgNC10LfRg9C70YzRgtCw0YLRiyDQsdC+0LvQtdC1INGB0YLRgNC+0LPQuNC80Lgg0LLQvtGCINC90LDQstC+0LTRj9GJ0LjQtSDQv9GA0LDQstC40LvQsCDRh9GC0L7QsdGLINC/0L7QvdC40LbQsNGC0Ywg0LHQsNC70LtcclxuXHJcbi3RgtC10YHRgiDQuNC00ZHRgiAyMCDQvNC40L3Rg9GCXHJcbi3QvdGD0LbQvdC+INC/0YDQuCDQvtGG0LXQvdC60LUg0YPRh9C40YLRi9Cy0LDRgtGMINC4INC+0LHRjNC10Lwg0YHQvtC+0LHRidC10L3QuNC5INGH0YLQvtCxINGBINC60LDQttC00YvQvCDRgdC+0LHQtdGB0LXQtNC90LjQutC+0Lwg0LHRi9C70L4g0LzQuNC90LjQvNGD0Lwg0L/QviA2INGB0L7QvtCx0YnQtdC90LjQuVxyXG4t0LrQsNC20LTRi9C5INC00LjQsNC70L7QsyDQtNC+0LvQttC10L0g0L/RgNC40LzQtdGA0L3QviDRgdC+0LTQtdGA0LbQsNGC0YwgMyDRgdGC0LDQtNC40LgsINC40L3QsNGH0LUg0L7RhtC10L3QutCwINC90LjQt9C60LDRjzpcclxuMSnQodGC0LDQtNC40Y8g0LfQvdCw0LrQvtC80YHRgtCy0LAg0LfQvdCw0LrQvtC80LjRgtGM0YHRjzogNSAtMTAg0YHQvtC+0LHRidC10L3QuNC5INC+0L3QuCDQtNC+0LvQttC90Ysg0LHRi9GC0Ywg0LIg0LHQvtC70YzRiNC40L3RgdGC0LLQtSDRgdCy0L7QtdC8INC/0L7RgdC70LXQtNC+0LLQsNGC0LXQu9GM0L3RiyDQuCDQvdC1INC/0L7RiNC70YvQtVxyXG4yKUPRgtCw0LTQuNGPINC/0YDQvtCz0YDQtdCy0LA6INC/0L4g0LTQuNCw0LvQvtCz0YMg0L/QvtC90Y/RgtC90L4g0YfRgtC+INC80L7QtNC10LvRjCDQvNC10L3QtdC1INC30LDQuNC90YLQtdGA0LXRgdC+0LLQsNC90LAg0YfQtdC8INC60LvQuNC10L3RgizQvNC+0LTQtdC70Ywg0LTQvtC70LbQvdCwINC90LUg0LfQsNC00LDQstCw0YLRjCDQvNC90L7Qs9C+INCy0L7Qv9GA0L7RgdC+0LIsINC/0L7QutCw0LfRi9Cy0LDRgtGMINGC0LjQt9C+0LLRi9C5INC60L7QvdGC0LXQvdGCINC4INC90LDQvNC10LrQuCDRh9C10YDQtdC3INC/0L7QtNGC0LXQutGB0YIg0L3QtdC90LDQstGP0LfRh9C40LLQvlxyXG4zKdCh0YLQsNC00LjRjyDQv9GA0L7QtNCw0LY6INC90YPQttC10L0g0LHQsNC70LDQvdGBINC80LXQttC00YMg0L/QvtGI0LvRi9C8INC/0L7QstC10YHRgtCy0L7QstCw0L3QuNC10Lwg0Lgg0L/QtdGA0LXQs9GA0YPQt9C+0Lwg0LrQvtC90YLQtdC90YLQvtC8INCx0LXQtyDQstC+0LTQstC+0LTRj9GJ0LjRhSDRgdC+0L7QsdGJ0LXQvdC40LksINGB0L7QvtCx0YnQtdC90LjRjyDQv9GA0LjQvNC10YDQvdC+INGB0YLRgNC+0Y/RgtGB0Y8g0LrQsNC6INC00LLQsCDQvdCw0LLQvtC00Y/RidC40YUg0YHQvtC+0LHRidC10L3QuNGPINC/0L4g0L/QvtC60YPQv9C60LUg0LrQvtC90YLQtdC90YLQsCDQvdCw0LzQtdC60LDRjtGJ0LjRhSDQvdCwINC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LrQvtC90YLQtdC90YLQsCDRh9C10Lwg0LHQvtC70YzRiNC1INC/0YDQvtC00LDQtiDRgtC10Lwg0LvRg9GH0YjQtVxyXG4t0YLQsNC60LbQtSDQvdGD0LbQvdC+INGD0YfQuNGC0YvQstCw0YLRjCDRh9GC0L7QsSDQvNC+0LTQtdC70Ywg0L3QtSDRg9C/0YDQsNGI0LjQstCw0LvQsCDQv9GA0LjQvtCx0YDQtdGB0YLQuCDQutC+0L3RgtC10L3Rgiwg0L3QtSDQstGL0LPQu9GP0LTQtdC70LAg0LrQsNC6INGI0LvRjtGF0LAsINGA0LDQsdC+0YLQsNC70LAg0L3QsCDQs9C70YPQsdC40L3RgyDRh9C10LrQsCDQuCDRjdC80L7RhtC40L7QvdCw0LvRjNC90YPRjiDQv9GA0LjQstGP0LfQsNC90L3QvtGB0YLRjCwg0LLRi9GB0L7QutC40Lkg0LHQsNC7INC10YHQu9C4INC60LvQuNC10L3RgiDQvtGB0YLQsNCy0LjRgiDRh9Cw0LXQstGL0LUsINGC0LDQutC20LUg0YPRh9C40YLRi9Cy0LDRgtGMINGD0YDQvtCy0LXQvdGMINCw0L3Qs9C70LjQudGB0LrQvtCz0L4g0Lgg0YLQviDRh9GC0L4g0L7QvdCwINC00LXRgNC20LjRgiDQutC+0L3RgtC10LrRgdGCINCy0YHQtdCz0L4g0LTQuNCw0LvQvtCz0LAsINGB0L7QvtCx0YnQtdC90LjRjyDQv9C+0YHQu9C10LTQvtCy0LDRgtC10LvRjNC90YtcclxuXHJcbtCS0JDQltCd0J46INCS0KHQlSDQoNCV0JfQo9Cb0KzQotCQ0KLQqyDQkNCd0JDQm9CY0JfQkCDQlNCe0JvQltCd0Ksg0JHQq9Ci0Kwg0KLQntCb0KzQmtCeINCd0JAg0KDQo9Ch0KHQmtCe0Jwg0K/Ql9Cr0JrQlSwg0JLQmtCb0K7Qp9CQ0K8g0JLQodCVINCS0JXQoNCU0JjQmtCi0KssINCX0JDQmtCb0K7Qp9CV0J3QmNCvLCDQodCf0JjQodCa0Jgg0KHQmNCb0KzQndCr0KUg0Jgg0KHQm9CQ0JHQq9ClINCh0KLQntCg0J7QnS4g0J3QlSDQmNCh0J/QntCb0KzQl9Ce0JLQkNCi0Kwg0JDQndCT0JvQmNCZ0KHQmtCY0Jkg0K/Ql9Cr0Jog0J3QmCDQkiDQmtCQ0JrQmNClINCn0JDQodCi0K/QpSDQntCi0JLQldCi0JAuXHJcblxyXG7QodCi0KDQntCT0J4g0J7QotCS0JXQp9CQ0Jkg0KLQntCb0KzQmtCeINCSIEpTT04g0KTQntCg0JzQkNCi0JUsINCR0JXQlyDQlNCe0J/QntCb0J3QmNCi0JXQm9Cs0J3QntCT0J4g0KLQldCa0KHQotCQINCU0J4g0JjQm9CYINCf0J7QodCb0JUgSlNPTi5cclxuXHJcbtCf0YDQtdC00L7RgdGC0LDQstGMINGA0LXQt9GD0LvRjNGC0LDRgiDQsNC90LDQu9C40LfQsCDQsiDRhNC+0YDQvNCw0YLQtSBKU09OOlxyXG5cclxue1xyXG4gIFwiZGlhbG9nX2FuYWx5c2lzXCI6IHtcclxuICAgIFwibWV0cmljc1wiOiB7XHJcbiAgICAgIFwiZW5nYWdlbWVudFwiOiB7XHJcbiAgICAgICAgXCJzY29yZVwiOiAsXHJcbiAgICAgICAgXCJ2ZXJkaWN0XCI6IFwiXCJcclxuICAgICAgfSxcclxuICAgICAgXCJjaGFybV9hbmRfdG9uZVwiOiB7XHJcbiAgICAgICAgXCJzY29yZVwiOiAsXHJcbiAgICAgICAgXCJ2ZXJkaWN0XCI6IFwiXCJcclxuICAgICAgfSxcclxuICAgICAgXCJjcmVhdGl2aXR5XCI6IHtcclxuICAgICAgICBcInNjb3JlXCI6ICxcclxuICAgICAgICBcInZlcmRpY3RcIjogXCJcIlxyXG4gICAgICB9LFxyXG4gICAgICBcImFkYXB0YWJpbGl0eVwiOiB7XHJcbiAgICAgICAgXCJzY29yZVwiOiAsXHJcbiAgICAgICAgXCJ2ZXJkaWN0XCI6IFwiXCJcclxuICAgICAgfSxcclxuICAgICAgXCJzZWxmX3Byb21vdGlvblwiOiB7XHJcbiAgICAgICAgXCJzY29yZVwiOiAsXHJcbiAgICAgICAgXCJ2ZXJkaWN0XCI6IFwiXCJcclxuICAgICAgfSxcclxuICAgICAgXCJwcmljaW5nX3BvbGljeVwiOiB7XHJcbiAgICAgICAgXCJzY29yZVwiOiAsXHJcbiAgICAgICAgXCJ2ZXJkaWN0XCI6IFwiXCIsXHJcbiAgICAgICAgXCJzdHJlbmd0aHNcIjogW10sXHJcbiAgICAgICAgXCJpbXByb3ZlbWVudHNcIjogW11cclxuICAgICAgfSxcclxuICAgICAgXCJzYWxlc19zdGFnZXNcIjoge1xyXG4gICAgICAgIFwiaW50cm9kdWN0aW9uXCI6IHtcclxuICAgICAgICAgIFwic2NvcmVcIjogLFxyXG4gICAgICAgICAgXCJzdHJlbmd0aHNcIjogW10sXHJcbiAgICAgICAgICBcIndlYWtuZXNzZXNcIjogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwid2FybXVwXCI6IHtcclxuICAgICAgICAgIFwic2NvcmVcIjogLFxyXG4gICAgICAgICAgXCJzdHJlbmd0aHNcIjogW10sXHJcbiAgICAgICAgICBcIndlYWtuZXNzZXNcIjogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiY2xvc2luZ1wiOiB7XHJcbiAgICAgICAgICBcInNjb3JlXCI6ICxcclxuICAgICAgICAgIFwic3RyZW5ndGhzXCI6IFtdLFxyXG4gICAgICAgICAgXCJ3ZWFrbmVzc2VzXCI6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgXCJvdmVyYWxsX2NvbmNsdXNpb25cIjogXCJcIixcclxuICAgIFwicmVzdWx0X3N1bW1hcnlcIjogXCJcIlxyXG4gIH1cclxufVxyXG5cclxuXCJyZXN1bHRfc3VtbWFyeVwiIC0g0Y3RgtC+INC60YDQsNGC0LrQvtC1ICjQtNC+IDIwMCDRgdC70L7Qsikg0YDQtdC30Y7QvNC1INGA0LXQt9GD0LvRjNGC0LDRgtC+0LIg0LDQvdCw0LvQuNC30LAsINCy0LrQu9GO0YfQsNGO0YnQtdC1INC+0LHRidGD0Y4g0L7RhtC10L3QutGDINGB0L7QuNGB0LrQsNGC0LXQu9GPLCDQtdCz0L4g0L7RgdC90L7QstC90YvQtSDRgdC40LvRjNC90YvQtSDRgdGC0L7RgNC+0L3RiyDQuCDRgNC10LrQvtC80LXQvdC00LDRhtC40Lgg0L/QviDRg9C70YPRh9GI0LXQvdC40Y4uINCt0YLQvtGCINGC0LXQutGB0YIg0LHRg9C00LXRgiDQv9C+0LrQsNC30LDQvSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y4g0LrQsNC6INC40YLQvtCz0L7QstGL0Lkg0LLRi9Cy0L7QtCDQsNC90LDQu9C40LfQsC5cclxuXHJcbtCS0L7RgiDQtNC40LDQu9C+0LPQuCDQtNC70Y8g0LDQvdCw0LvQuNC30LA6XHJcbmA7XHJcbiAgICBcclxuICAgIC8vINCk0L7RgNC80LjRgNGD0LXQvCDRh9Cw0YHRgtC4INC/0YDQvtC80L/RgtCwINC40Lcg0LrQsNC20LTQvtCz0L4g0YfQsNGC0LBcclxuICAgIGNvbnN0IGNoYXRQcm9tcHRzID0gY2hhdHMubWFwKGNoYXQgPT4ge1xyXG4gICAgICBjb25zdCBjaGF0TnVtYmVyID0gY2hhdC5jaGF0X251bWJlcjtcclxuICAgICAgbGV0IGNoYXJhY3RlclR5cGUgPSAnJztcclxuICAgICAgXHJcbiAgICAgIHN3aXRjaChjaGF0TnVtYmVyKSB7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgY2hhcmFjdGVyVHlwZSA9ICfQodGC0YDQsNGB0YLQvdGL0Lkg0LrQu9C40LXQvdGCIChNYXJjdXMpJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgIGNoYXJhY3RlclR5cGUgPSAn0JrQsNC/0YDQuNC30L3Ri9C5INC60LvQuNC10L3RgiAoU2hyZWspJztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgIGNoYXJhY3RlclR5cGUgPSAn0K3QutC+0L3QvtC80L3Ri9C5INC60LvQuNC10L3Rgiwg0YLQvtGA0LPRg9GO0YnQuNC50YHRjyDQviDRhtC10L3QtSAoT2xpdmVyKSc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICBjaGFyYWN0ZXJUeXBlID0gJ9Cf0YDQvtCy0L7QutCw0YbQuNC+0L3QvdGL0Lkg0LrQu9C40LXQvdGCLCDQv9GA0L7QstC10YDRj9GO0YnQuNC5INCz0YDQsNC90LjRhtGLIChBbGV4KSc7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgY2hhcmFjdGVyVHlwZSA9IGDQmtC70LjQtdC90YIgJHtjaGF0TnVtYmVyfWA7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gY2hhdC5tZXNzYWdlcyB8fCBbXTtcclxuICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBgXFxuXFxuLS0tINCn0LDRgiAke2NoYXROdW1iZXJ9ICgke2NoYXJhY3RlclR5cGV9KSAtLS1cXG7QndC10YIg0YHQvtC+0LHRidC10L3QuNC5YDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAobXNnID0+IHtcclxuICAgICAgICBjb25zdCByb2xlTGFiZWwgPSBtc2cuaXNPd24gPyAn0KHQvtC40YHQutCw0YLQtdC70YwnIDogYEFJLdC60LvQuNC10L3RgiAoJHtjaGFyYWN0ZXJUeXBlfSlgO1xyXG4gICAgICAgIHJldHVybiBgJHtyb2xlTGFiZWx9OiAke21zZy5jb250ZW50fWA7XHJcbiAgICAgIH0pLmpvaW4oJ1xcbicpO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIGBcXG5cXG4tLS0g0KfQsNGCICR7Y2hhdE51bWJlcn0gKCR7Y2hhcmFjdGVyVHlwZX0pIC0tLVxcbiR7Zm9ybWF0dGVkTWVzc2FnZXN9YDtcclxuICAgIH0pLmpvaW4oJycpO1xyXG4gICAgXHJcbiAgICAvLyDQodC+0LHQuNGA0LDQtdC8INC/0L7Qu9C90YvQuSDQv9GA0L7QvNC/0YJcclxuICAgIGNvbnN0IGZ1bGxQcm9tcHQgPSBwcm9tcHRIZWFkZXIgKyBjaGF0UHJvbXB0cztcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ0FuYWx5c2lzIHByb21wdCBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5LCBsZW5ndGg6JywgZnVsbFByb21wdC5sZW5ndGgpO1xyXG4gICAgcmV0dXJuIGZ1bGxQcm9tcHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgYW5hbHlzaXMgcHJvbXB0OicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVDYW5kaWRhdGVGb3JtKHVzZXJJZDogc3RyaW5nLCBmb3JtRGF0YTogUmVjb3JkPHN0cmluZywgYW55Pikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnU2F2aW5nIGNhbmRpZGF0ZSBmb3JtIGRhdGEgZm9yIHVzZXI6JywgdXNlcklkLCBmb3JtRGF0YSk7XHJcbiAgICBcclxuICAgIC8vINCf0L7Qu9GD0YfQsNC10LwgSUQg0YHQvtGC0YDRg9C00L3QuNC60LAg0LjQtyDQv9Cw0YDQsNC80LXRgtGA0LBcclxuICAgIGNvbnN0IGVtcGxveWVlSWQgPSB1c2VySWQ7XHJcbiAgICBcclxuICAgIGlmICghZW1wbG95ZWVJZCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lEINGB0L7RgtGA0YPQtNC90LjQutCwINC90LUg0L3QsNC50LTQtdC9LiDQn9C+0LbQsNC70YPQudGB0YLQsCwg0L3QsNGH0L3QuNGC0LUg0L/RgNC+0YbQtdGB0YEg0YDQtdCz0LjRgdGC0YDQsNGG0LjQuCDQt9Cw0L3QvtCy0L4uJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDQuNC80Y8g0YHQvtGC0YDRg9C00L3QuNC60LAg0LIg0YLQsNCx0LvQuNGG0LUgZW1wbG95ZWVzXHJcbiAgICBpZiAoZm9ybURhdGEuZmlyc3RfbmFtZSkge1xyXG4gICAgICBjb25zdCB7IGVycm9yOiBuYW1lVXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2VtcGxveWVlcycpXHJcbiAgICAgICAgLnVwZGF0ZSh7IGZpcnN0X25hbWU6IGZvcm1EYXRhLmZpcnN0X25hbWUgfSlcclxuICAgICAgICAuZXEoJ2lkJywgZW1wbG95ZWVJZCk7XHJcbiAgICAgICAgXHJcbiAgICAgIGlmIChuYW1lVXBkYXRlRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBlbXBsb3llZSBuYW1lOicsIG5hbWVVcGRhdGVFcnJvcik7XHJcbiAgICAgICAgLy8g0J/RgNC+0LTQvtC70LbQsNC10Lwg0L/RgNC+0YbQtdGB0YEg0LTQsNC20LUg0L/RgNC4INC+0YjQuNCx0LrQtSDQvtCx0L3QvtCy0LvQtdC90LjRjyDQuNC80LXQvdC4XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRgdGD0YnQtdGB0YLQstGD0LXRgiDQu9C4INGD0LbQtSDQsNC90LrQtdGC0LAg0LTQu9GPINGN0YLQvtCz0L4g0YHQvtGC0YDRg9C00L3QuNC60LBcclxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdGb3JtLCBlcnJvcjogY2hlY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2NhbmRpZGF0ZV9mb3JtcycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgLmVxKCdlbXBsb3llZV9pZCcsIGVtcGxveWVlSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgXHJcbiAgICBpZiAoY2hlY2tFcnJvciAmJiBjaGVja0Vycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHsgLy8gUEdSU1QxMTYgLSDQt9Cw0L/QuNGB0Ywg0L3QtSDQvdCw0LnQtNC10L3QsFxyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBleGlzdGluZyBmb3JtOicsIGNoZWNrRXJyb3IpO1xyXG4gICAgICAvLyDQn9GA0L7QtNC+0LvQttCw0LXQvCDQv9GA0L7RhtC10YHRgSDQtNCw0LbQtSDQv9GA0Lgg0L7RiNC40LHQutC1XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vINCf0L7QtNCz0L7RgtCw0LLQu9C40LLQsNC10Lwg0LTQsNC90L3Ri9C1INCw0L3QutC10YLRi1xyXG4gICAgY29uc3QgZm9ybURhdGFUb1NhdmUgPSB7XHJcbiAgICAgIHRlbGVncmFtX3RhZzogZm9ybURhdGEudGVsZWdyYW1fdGFnLFxyXG4gICAgICBzaGlmdDogZm9ybURhdGEuc2hpZnQsXHJcbiAgICAgIGV4cGVyaWVuY2U6IGZvcm1EYXRhLmV4cGVyaWVuY2UsXHJcbiAgICAgIG1vdGl2YXRpb246IGZvcm1EYXRhLm1vdGl2YXRpb24sXHJcbiAgICAgIGFib3V0X21lOiBmb3JtRGF0YS5hYm91dF9tZSxcclxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgXHJcbiAgICAvLyDQldGB0LvQuCDQsNC90LrQtdGC0LAg0YPQttC1INGB0YPRidC10YHRgtCy0YPQtdGCLCDQvtCx0L3QvtCy0LvRj9C10Lwg0LXRkVxyXG4gICAgaWYgKGV4aXN0aW5nRm9ybSkge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXBkYXRpbmcgZXhpc3RpbmcgY2FuZGlkYXRlIGZvcm06JywgZXhpc3RpbmdGb3JtLmlkKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2NhbmRpZGF0ZV9mb3JtcycpXHJcbiAgICAgICAgLnVwZGF0ZShmb3JtRGF0YVRvU2F2ZSlcclxuICAgICAgICAuZXEoJ2lkJywgZXhpc3RpbmdGb3JtLmlkKVxyXG4gICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICBcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgY2FuZGlkYXRlIGZvcm06JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBkYXRpbmcgY2FuZGlkYXRlIGZvcm06ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmVzdWx0ID0gZGF0YTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vINCY0L3QsNGH0LUg0YHQvtC30LTQsNC10Lwg0L3QvtCy0YPRjiDQsNC90LrQtdGC0YNcclxuICAgICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIG5ldyBjYW5kaWRhdGUgZm9ybSBmb3IgZW1wbG95ZWU6JywgZW1wbG95ZWVJZCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10LwgZW1wbG95ZWVfaWQg0Log0LTQsNC90L3Ri9C8INCw0L3QutC10YLRi1xyXG4gICAgICBjb25zdCBuZXdGb3JtRGF0YSA9IHtcclxuICAgICAgICAuLi5mb3JtRGF0YVRvU2F2ZSxcclxuICAgICAgICBlbXBsb3llZV9pZDogZW1wbG95ZWVJZCxcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2NhbmRpZGF0ZV9mb3JtcycpXHJcbiAgICAgICAgLmluc2VydChbbmV3Rm9ybURhdGFdKVxyXG4gICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICBcclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGNhbmRpZGF0ZSBmb3JtOicsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIHNhdmluZyBjYW5kaWRhdGUgZm9ybTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXN1bHQgPSBkYXRhO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnQ2FuZGlkYXRlIGZvcm0gc2F2ZWQgc3VjY2Vzc2Z1bGx5OicsIHJlc3VsdCk7XHJcbiAgICBcclxuICAgIC8vINCe0YfQuNGJ0LDQtdC8IHNlc3Npb25TdG9yYWdlINC/0L7RgdC70LUg0YPRgdC/0LXRiNC90L7Qs9C+INGB0L7RhdGA0LDQvdC10L3QuNGPXHJcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdjYW5kaWRhdGVGb3JtRGF0YScpO1xyXG4gICAgXHJcbiAgICAvLyDQodC+0YXRgNCw0L3Rj9C10LwgZW1wbG95ZWVfaWQg0LIg0LLQvtC30LLRgNCw0YnQsNC10LzRi9GFINC00LDQvdC90YvRhSDQtNC70Y8g0L/QvtGB0LvQtdC00YPRjtGJ0LXQs9C+INC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5yZXN1bHQsXHJcbiAgICAgIGVtcGxveWVlX2lkOiBlbXBsb3llZUlkXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzYXZlQ2FuZGlkYXRlRm9ybTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vINCk0YPQvdC60YbQuNGPINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LTQsNC90L3Ri9GFINCw0L3QutC10YLRiyDRgdC+0LjRgdC60LDRgtC10LvRjyDQv9C+IGlkINGB0L7RgtGA0YPQtNC90LjQutCwXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYW5kaWRhdGVGb3JtQnlFbXBsb3llZUlkKGVtcGxveWVlSWQ6IHN0cmluZyk6IFByb21pc2U8Q2FuZGlkYXRlRm9ybURhdGEgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdjYW5kaWRhdGVfZm9ybXMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdlbXBsb3llZV9pZCcsIGVtcGxveWVlSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FuZGlkYXRlIGZvcm06JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0Q2FuZGlkYXRlRm9ybUJ5RW1wbG95ZWVJZDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXJEYXRhOiB7XHJcbiAgZmlyc3RfbmFtZTogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgcGhvbmU6IHN0cmluZztcclxufSk6IFByb21pc2U8VXNlcj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndXNlcnMnKVxyXG4gICAgICAuaW5zZXJ0KFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiB1c2VyRGF0YS5maXJzdF9uYW1lLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXJEYXRhLmVtYWlsLFxyXG4gICAgICAgICAgcGhvbmU6IHVzZXJEYXRhLnBob25lLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0pXHJcbiAgICAgIC5zZWxlY3QoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdXNlcjonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSB1c2VyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGF0YSByZXR1cm5lZCBmcm9tIHRoZSBkYXRhYmFzZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhWzBdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBjcmVhdGVVc2VyOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqINCh0L7Qt9C00LDQtdGCINC4INGB0L7RhdGA0LDQvdGP0LXRgiDRgtC+0LrQtdC9INC00LvRjyDQtNC+0YHRgtGD0L/QsCDQutCw0L3QtNC40LTQsNGC0LAg0Log0YTQvtGA0LzQtSDRgNC10LPQuNGB0YLRgNCw0YbQuNC4XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2FuZGlkYXRlVG9rZW4oZW1wbG95ZWVJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIGNhbmRpZGF0ZSB0b2tlbiBmb3IgZW1wbG95ZWU6JywgZW1wbG95ZWVJZCk7XHJcbiAgICBcclxuICAgIC8vINCT0LXQvdC10YDQuNGA0YPQtdC8INGD0L3QuNC60LDQu9GM0L3Ri9C5INGC0L7QutC10L1cclxuICAgIGNvbnN0IHRva2VuID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDEwKSArIFxyXG4gICAgICAgICAgICAgICAgIERhdGUubm93KCkudG9TdHJpbmcoMzYpICsgXHJcbiAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDEwKTtcclxuICAgIFxyXG4gICAgLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHRgNC+0Log0LTQtdC50YHRgtCy0LjRjyDRgtC+0LrQtdC90LAgKDcg0LTQvdC10LkpXHJcbiAgICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgZXhwaXJlc0F0LnNldERhdGUoZXhwaXJlc0F0LmdldERhdGUoKSArIDcpO1xyXG4gICAgXHJcbiAgICAvLyDQlNC10LDQutGC0LjQstC40YDRg9C10Lwg0LLRgdC1INC/0YDQtdC00YvQtNGD0YnQuNC1INGC0L7QutC10L3RiyDQtNC70Y8g0Y3RgtC+0LPQviDRgdC+0YLRgNGD0LTQvdC40LrQsFxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnY2FuZGlkYXRlX3Rva2VucycpXHJcbiAgICAgICAgLnVwZGF0ZSh7IGlzX3VzZWQ6IHRydWUgfSlcclxuICAgICAgICAuZXEoJ2VtcGxveWVlX2lkJywgZW1wbG95ZWVJZClcclxuICAgICAgICAuZXEoJ2lzX3VzZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdEZWFjdGl2YXRlZCBwcmV2aW91cyB0b2tlbnMgZm9yIGVtcGxveWVlOicsIGVtcGxveWVlSWQpO1xyXG4gICAgfSBjYXRjaCAoZGVhY3RpdmF0ZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZGVhY3RpdmF0aW5nIHByZXZpb3VzIHRva2VuczonLCBkZWFjdGl2YXRlRXJyb3IpO1xyXG4gICAgICAvLyDQn9GA0L7QtNC+0LvQttCw0LXQvCDQstGL0L/QvtC70L3QtdC90LjQtSDQtNCw0LbQtSDQv9GA0Lgg0L7RiNC40LHQutC1XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQvdC+0LLRi9C5INGC0L7QutC10L0g0LIg0LHQsNC30LUg0LTQsNC90L3Ri9GFXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnY2FuZGlkYXRlX3Rva2VucycpXHJcbiAgICAgIC5pbnNlcnQoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVtcGxveWVlX2lkOiBlbXBsb3llZUlkLFxyXG4gICAgICAgICAgdG9rZW46IHRva2VuLFxyXG4gICAgICAgICAgZXhwaXJlc19hdDogZXhwaXJlc0F0LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICBpc191c2VkOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgXSlcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY2FuZGlkYXRlIHRva2VuOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGNhbmRpZGF0ZSB0b2tlbjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkYXRhIHJldHVybmVkIGZyb20gY2FuZGlkYXRlIHRva2VuIGNyZWF0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdUb2tlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseTonLCBkYXRhLnRva2VuKTtcclxuICAgIHJldHVybiBkYXRhLnRva2VuO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBjcmVhdGVDYW5kaWRhdGVUb2tlbjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDQn9GA0L7QstC10YDRj9C10YIg0LLQsNC70LjQtNC90L7RgdGC0Ywg0YLQvtC60LXQvdCwINC60LDQvdC00LjQtNCw0YLQsCDQuCDQstC+0LfQstGA0LDRidCw0LXRgiBJRCDRgdC+0YLRgNGD0LTQvdC40LrQsFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlQ2FuZGlkYXRlVG9rZW4odG9rZW46IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnVmFsaWRhdGluZyBjYW5kaWRhdGUgdG9rZW46JywgdG9rZW4pO1xyXG4gICAgXHJcbiAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INGC0L7QutC10L0g0LjQtyDQsdCw0LfRiyDQtNCw0L3QvdGL0YVcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdjYW5kaWRhdGVfdG9rZW5zJylcclxuICAgICAgLnNlbGVjdCgnaWQsIGVtcGxveWVlX2lkLCBleHBpcmVzX2F0LCBpc191c2VkJylcclxuICAgICAgLmVxKCd0b2tlbicsIHRva2VuKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2YWxpZGF0aW5nIHRva2VuOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0L3QtSDQuNGB0YLQtdC6INC70Lgg0YHRgNC+0Log0LTQtdC50YHRgtCy0LjRjyDRgtC+0LrQtdC90LBcclxuICAgIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKGRhdGEuZXhwaXJlc19hdCk7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXhwaXJlc0F0IDwgbm93KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rva2VuIGhhcyBleHBpcmVkOicsIHtcclxuICAgICAgICB0b2tlbjogdG9rZW4sXHJcbiAgICAgICAgZXhwaXJlc0F0OiBleHBpcmVzQXQudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBub3c6IG5vdy50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g0J/QvtC80LXRh9Cw0LXQvCDRgtC+0LrQtdC9INC60LDQuiDQuNGB0L/QvtC70YzQt9C+0LLQsNC90L3Ri9C5XHJcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2NhbmRpZGF0ZV90b2tlbnMnKVxyXG4gICAgICAudXBkYXRlKHsgXHJcbiAgICAgICAgaXNfdXNlZDogdHJ1ZSxcclxuICAgICAgICBsYXN0X3VzZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBpcF9hZGRyZXNzOiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUsXHJcbiAgICAgICAgdXNlcl9hZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudFxyXG4gICAgICB9KVxyXG4gICAgICAuZXEoJ2lkJywgZGF0YS5pZCk7XHJcbiAgICBcclxuICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHVwZGF0aW5nIHRva2VuIHVzYWdlIHN0YXR1czonLCB1cGRhdGVFcnJvcik7XHJcbiAgICAgIC8vINCf0YDQvtC00L7Qu9C20LDQtdC8INC00LDQttC1INC10YHQu9C4INC+0LHQvdC+0LLQu9C10L3QuNC1INGB0YLQsNGC0YPRgdCwINC90LUg0YPQtNCw0LvQvtGB0YxcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ1Rva2VuIHZhbGlkYXRlZCBzdWNjZXNzZnVsbHkgZm9yIGVtcGxveWVlOicsIGRhdGEuZW1wbG95ZWVfaWQpO1xyXG4gICAgcmV0dXJuIGRhdGEuZW1wbG95ZWVfaWQ7XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXhjZXB0aW9uIGluIHZhbGlkYXRlQ2FuZGlkYXRlVG9rZW46JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FuZGlkYXRlRm9ybShlbXBsb3llZUlkOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFlbXBsb3llZUlkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGVtcGxveWVlIElEIHByb3ZpZGVkIGZvciBnZXRDYW5kaWRhdGVGb3JtJyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdjYW5kaWRhdGVfZm9ybXMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdlbXBsb3llZV9pZCcsIGVtcGxveWVlSWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2FuZGlkYXRlIGZvcm06JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXhjZXB0aW9uIGluIGdldENhbmRpZGF0ZUZvcm06JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vLyDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8g0YHRgtCw0YLRg9GB0LAg0YfQsNGC0LAgKNC/0LXRh9Cw0YLQsNC90LjQtSwg0L/RgNC+0YfQuNGC0LDQvdC+INC4INGCLtC0LilcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNoYXRTdGF0dXMoc2Vzc2lvbklkOiBzdHJpbmcsIGNoYXROdW1iZXI6IDEgfCAyIHwgMyB8IDQsIHN0YXR1czogeyBpc1R5cGluZz86IGJvb2xlYW4sIHVucmVhZENvdW50PzogbnVtYmVyIH0pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFRlc3RTZXNzaW9uKHNlc3Npb25JZCk7XHJcbiAgICBcclxuICAgIGlmICghc2Vzc2lvbikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ9Ch0LXRgdGB0LjRjyDQvdC1INC90LDQudC00LXQvdCwJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChzZXNzaW9uLmNvbXBsZXRlZCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ9Cd0LXQstC+0LfQvNC+0LbQvdC+INC+0LHQvdC+0LLQuNGC0Ywg0YHRgtCw0YLRg9GBINC00LvRjyDQt9Cw0LLQtdGA0YjQtdC90L3QvtC5INGB0LXRgdGB0LjQuCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDQkiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0YDQtdCw0LvQuNC30LDRhtC40Lgg0LHQsNC30Ysg0LTQsNC90L3Ri9GFLCDQt9C00LXRgdGMINC90YPQttC90L4g0LHRg9C00LXRgiDQvtCx0L3QvtCy0LjRgtGMINGB0YLQsNGC0YPRgSDRh9Cw0YLQsFxyXG4gICAgLy8g0J3QsNC/0YDQuNC80LXRgCwg0LzQvtC20L3QviDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywg0YLQsNCx0LvQuNGG0YMgY2hhdF9zdGF0dXMg0LjQu9C4INC00L7QsdCw0LLQuNGC0Ywg0LzQtdGC0LDQtNCw0L3QvdGL0LUg0Log0YHQtdGB0YHQuNC4XHJcbiAgICBcclxuICAgIC8vINCf0YDQuNC80LXRgCDRgNC10LDQu9C40LfQsNGG0LjQuCAo0L3Rg9C20L3QviDQsNC00LDQv9GC0LjRgNC+0LLQsNGC0Ywg0L/QvtC0INCy0LDRiNGDINGB0YLRgNGD0LrRgtGD0YDRgyDQtNCw0L3QvdGL0YUpXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndGVzdF9zZXNzaW9ucycpXHJcbiAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgIFtgY2hhdF8ke2NoYXROdW1iZXJ9X3N0YXR1c2BdOiBzdGF0dXNcclxuICAgICAgfSlcclxuICAgICAgLmVxKCdpZCcsIHNlc3Npb25JZClcclxuICAgICAgLnNlbGVjdCgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBkYXRhPy5bMF0gfHwgbnVsbDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgY2hhdCBzdGF0dXM6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwic3VwYWJhc2UiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZ2xvYmFsIiwiZmV0Y2giLCJiaW5kIiwiZ2xvYmFsVGhpcyIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsImVyciIsImNyZWF0ZUVtcGxveWVlIiwiZW1wbG95ZWVEYXRhIiwiaW5zZXJ0IiwiZmlyc3RfbmFtZSIsImRlcGFydG1lbnQiLCJsZXZlbCIsInN1Y2Nlc3MiLCJ1bmRlZmluZWQiLCJpbXByb3ZlbWVudCIsInRyZW5kIiwic3RhdHVzIiwibGVuZ3RoIiwiZ2V0RW1wbG95ZWVzIiwib3JkZXIiLCJhc2NlbmRpbmciLCJtZXNzYWdlIiwiZ2V0RW1wbG95ZWUiLCJpZCIsImVxIiwic2luZ2xlIiwidXBkYXRlRW1wbG95ZWUiLCJ1cGRhdGUiLCJkZWxldGVFbXBsb3llZSIsImRlbGV0ZSIsImNyZWF0ZVRlc3RTZXNzaW9uIiwiZW1wbG95ZWVJZCIsImV4aXN0aW5nU2Vzc2lvbnMiLCJjaGVja0Vycm9yIiwiZXhpc3RpbmdDaGF0cyIsImNoYXRFcnJvciIsIm1hcCIsImMiLCJjaGF0TnVtYmVyIiwiY2hhdF9udW1iZXIiLCJjaGF0cyIsIndhcm4iLCJleGlzdGluZ0NoYXROdW1iZXJzIiwibWlzc2luZ0NoYXROdW1iZXJzIiwiZmlsdGVyIiwibnVtIiwiaW5jbHVkZXMiLCJhZGRpdGlvbmFsQ2hhdFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwidGVzdF9zZXNzaW9uX2lkIiwibWVzc2FnZXMiLCJhbGxDaGF0cyIsImFkZGl0aW9uYWxDaGF0c0NyZWF0ZWQiLCJpIiwicHVzaCIsInNlc3Npb24iLCJzZXNzaW9uRXJyb3IiLCJlbXBsb3llZV9pZCIsInN0YXJ0X3RpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJjb21wbGV0ZWQiLCJjaGF0UmVzdWx0cyIsImNoYXRFcnJvcnMiLCJjcmVhdGVkQ2hhdHMiLCJjaGF0c0Vycm9yIiwicmVwYWlyUmVzdWx0cyIsInJlcGFpcmVkQ2hhdHMiLCJzZXNzaW9uSWQiLCJjaGF0Q291bnQiLCJjaGF0TnVtYmVycyIsInVwZGF0ZVRlc3RTZXNzaW9uIiwidXBkYXRlcyIsInVwZGF0ZWRfYXQiLCJjb21wbGV0ZVRlc3RTZXNzaW9uIiwiZXhpc3RpbmdTZXNzaW9uIiwiZW5kX3RpbWUiLCJjYWNoZUtleSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiY2FjaGVkX2F0IiwiY2FjaGVFcnJvciIsImdldFJlY2VudFRlc3RTZXNzaW9ucyIsImNhY2hlZERhdGEiLCJnZXRJdGVtIiwic2Vzc2lvbnMiLCJ0aW1lc3RhbXAiLCJwYXJzZSIsImNhY2hlQWdlIiwibm93IiwiZ2V0VGltZSIsIkFycmF5IiwiaXNBcnJheSIsIk1hdGgiLCJyb3VuZCIsInMiLCJ2YWxpZFNlc3Npb25zIiwibGF0ZXN0U2Vzc2lvbkJ5RW1wbG95ZWUiLCJmb3JFYWNoIiwiZXhpc3RpbmdEYXRlIiwiY3JlYXRlZF9hdCIsImN1cnJlbnREYXRlIiwidW5pcXVlU2Vzc2lvbnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJtZXNzYWdlc19jb3VudCIsInJlZHVjZSIsInRvdGFsIiwiY2hhdCIsImdldEVtcGxveWVlVGVzdFNlc3Npb25zIiwiYWRkTWVzc2FnZVRvVGVzdFNlc3Npb24iLCJnZXRUZXN0U2Vzc2lvbiIsImZldGNoRXJyb3IiLCJjaGF0SWQiLCJleGlzdGluZ01lc3NhZ2VzIiwidXBkYXRlZE1lc3NhZ2VzIiwidXBkYXRlZENoYXQiLCJ1cGRhdGVFcnJvciIsIm1lc3NhZ2VDb3VudCIsImxhdGVzdE1lc3NhZ2UiLCJnZXRUZXN0U2Vzc2lvbkNoYXRzIiwiZ2V0Q2hhdEhpc3RvcnkiLCJ0ZXN0U2Vzc2lvbklkIiwiY29tcGxldGVBbGxFbXBsb3llZVRlc3RTZXNzaW9ucyIsImFjdGl2ZVNlc3Npb25zIiwiY3VycmVudFRpbWUiLCJzYXZlVGVzdFJlc3VsdCIsInRlc3RSZXN1bHQiLCJleGlzdGluZ1Jlc3VsdHMiLCJ1cGRhdGVkRGF0YSIsImdldFRlc3RSZXN1bHRGb3JTZXNzaW9uIiwiY29kZSIsImdldFRlc3RSZXN1bHRzRm9yRW1wbG95ZWUiLCJnZW5lcmF0ZUFuYWx5c2lzUHJvbXB0IiwicHJvbXB0SGVhZGVyIiwiY2hhdFByb21wdHMiLCJjaGFyYWN0ZXJUeXBlIiwiZm9ybWF0dGVkTWVzc2FnZXMiLCJtc2ciLCJyb2xlTGFiZWwiLCJpc093biIsImNvbnRlbnQiLCJqb2luIiwiZnVsbFByb21wdCIsInNhdmVDYW5kaWRhdGVGb3JtIiwidXNlcklkIiwiZm9ybURhdGEiLCJuYW1lVXBkYXRlRXJyb3IiLCJleGlzdGluZ0Zvcm0iLCJmb3JtRGF0YVRvU2F2ZSIsInRlbGVncmFtX3RhZyIsInNoaWZ0IiwiZXhwZXJpZW5jZSIsIm1vdGl2YXRpb24iLCJhYm91dF9tZSIsInJlc3VsdCIsIm5ld0Zvcm1EYXRhIiwic2Vzc2lvblN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiZ2V0Q2FuZGlkYXRlRm9ybUJ5RW1wbG95ZWVJZCIsImNyZWF0ZVVzZXIiLCJ1c2VyRGF0YSIsImVtYWlsIiwicGhvbmUiLCJjcmVhdGVDYW5kaWRhdGVUb2tlbiIsInRva2VuIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJleHBpcmVzQXQiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImlzX3VzZWQiLCJkZWFjdGl2YXRlRXJyb3IiLCJleHBpcmVzX2F0IiwidmFsaWRhdGVDYW5kaWRhdGVUb2tlbiIsImxhc3RfdXNlZF9hdCIsImlwX2FkZHJlc3MiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwidXNlcl9hZ2VudCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImdldENhbmRpZGF0ZUZvcm0iLCJ1cGRhdGVDaGF0U3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftest-sessions%2Froute&page=%2Fapi%2Ftest-sessions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftest-sessions%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5CDocuments%5CGitHub%5Conlyfans_last_chance%5Conlyfans%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5CDocuments%5CGitHub%5Conlyfans_last_chance%5Conlyfans&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();