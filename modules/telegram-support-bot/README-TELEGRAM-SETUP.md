# Настройка Telegram бота для пересылки сообщений

## Необходимые переменные окружения

Для работы Telegram бота с пересылкой сообщений в личный аккаунт необходимо добавить следующие переменные окружения в файл `.env`:

```
# Telegram Bot Token (получить у @BotFather)
TELEGRAM_BOT_TOKEN=your_bot_token_here


# ID чата для пересылки сообщений (получить автоматически через API)
TELEGRAM_ACCOUNT_CHAT_ID=your_chat_id_here
```

## Шаги для настройки

1. **Создание бота**
   - Откройте Telegram и найдите бота [@BotFather](https://t.me/BotFather)
   - Отправьте команду `/newbot`
   - Следуйте инструкциям для создания нового бота
   - Скопируйте полученный токен бота (TELEGRAM_BOT_TOKEN)

2. **Добавление переменных окружения**
   - Создайте или отредактируйте файл `.env` в корне проекта
   - Добавьте переменные окружения из примера выше
   - Замените `your_bot_token_here` на токен, полученный от @BotFather

3. **Получение TELEGRAM_ACCOUNT_CHAT_ID**
   - Найдите вашего бота в Telegram и отправьте ему команду `/start`
   - Запустите приложение `npm run dev`
   - Откройте URL `http://localhost:3000/api/setup-telegram` в браузере
   - Скопируйте полученный `chatId` и добавьте его в `.env` как `TELEGRAM_ACCOUNT_CHAT_ID`

4. **Настройка вебхука (опционально для продакшена)**
   - После деплоя приложения, настройте вебхук для бота:
   ```
   https://api.telegram.org/bot<TELEGRAM_BOT_TOKEN>/setWebhook?url=https://your-domain.com/api/telegram-webhook
   ```

## Проверка работоспособности

1. Запустите приложение `npm run dev`
2. Откройте веб-интерфейс и отправьте сообщение
3. Проверьте, что сообщение было переслано в ваш аккаунт Telegram
4. Проверьте логи в файле `telegram-bot-logs.txt`

## Решение проблем

- **Бот не отвечает**: Убедитесь, что `TELEGRAM_BOT_TOKEN` задан правильно
- **Сообщения не пересылаются**: Проверьте значение `TELEGRAM_ACCOUNT_CHAT_ID` в файле `.env`
- **Ошибки в логах**: Проверьте файл `telegram-bot-logs.txt` для подробной информации об ошибках 